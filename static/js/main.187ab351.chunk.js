(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1);function r(e){var t=e.oneOfType([e.number,e.string]);return{apiResponse:e.shape({status:e.oneOf(["success","error"]).isRequired,message:e.string,payload:e.any}),apiResponseSuccess:e.shape({status:e.oneOf(["success"]).isRequired,message:e.string,payload:e.any}),apiResponseError:e.shape({status:e.oneOf(["error"]).isRequired,message:e.string.isRequired,payload:e.any}),idOnly:e.shape({id:t}),session:e.shape({id:t,start_date:e.string,end_date:e.string,name:e.string.isRequired}),contractTemplateMinimal:e.shape({template_file:e.string}),contractTemplate:e.shape({template_file:e.string,template_name:e.string}),position:e.shape({position_code:e.string.isRequired,position_title:e.string,hours_per_assignment:e.number,start_date:e.string,end_date:e.string,contract_template_id:t,duties:e.string,qualifications:e.string,ad_hours_per_assignment:e.number,ad_num_assignments:e.number,ad_open_date:e.string,ad_close_date:e.string,desired_num_assignments:e.number,current_enrollment:e.number,current_waitlisted:e.number,instructor_ids:e.arrayOf(t),instructor_preference:e.arrayOf(e.shape({preference_level:e.number,applicant_id:t,instructor_id:t}))}),instructor:e.shape({first_name:e.string.isRequired,last_name:e.string.isRequired,email:e.string,utorid:e.string.isRequired}),assignment:e.shape({start_date:e.string,end_date:e.string,note:e.string,offer_override_pdf:e.string,applicant_id:t.isRequired,position_id:t.isRequired,active_offer_status:e.oneOf(["accepted","rejected","pending",null])}),applicant:e.shape({utorid:e.string.isRequired,student_number:e.string,first_name:e.string.isRequired,last_name:e.string.isRequired,email:e.string,phone:e.string}),wageChunk:e.shape({start_date:e.string,end_date:e.string,hours:e.number,rate:e.number}),reportingTag:e.shape({name:e.string}),offer:e.shape({first_name:e.string,last_name:e.string,email:e.string,position_code:e.string,position_title:e.string,position_start_date:e.string,position_end_date:e.string,first_time_ta:e.bool,instructor_contact_desc:e.string,pay_period_desc:e.string,installments:e.number,ta_coordinator_name:e.string,ta_coordinator_email:e.string,emailed_date:e.string,status:e.string,accepted_date:e.string,rejected_date:e.string,withdrawn_date:e.string}),application:e.shape({session_id:t,comments:e.string,program:e.string,department:e.string,previous_uoft_experience:e.string,yip:e.number,annotation:e.string,applicant_id:t,position_preference:e.arrayOf(e.shape({preference_level:e.number,position_id:t}))}),user:e.shape({utorid:e.string,roles:e.arrayOf(e.string),email:e.string})}}r(n.n(a).a)},241:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),i=n(12),s=n(14),o=n(121),c=n.n(o),u={sessions:[{id:1,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",name:"2019 Fall",rate1:45.55,rate2:47.33},{id:2,start_date:"2020-01-01T00:00:00.000Z",end_date:"2020-04-30T00:00:00.000Z",name:"2021 Spring",rate1:45.55,rate2:null}],available_contract_templates:[{template_file:"/math/default.html"},{template_file:"/math/default2018.html"},{template_file:"/math/invigilate.html"},{template_file:"/math/invigilate2014.html"},{template_file:"/math/oto.html"}],contract_templates:[{id:1,template_name:"standard",template_file:"/math/default.html"},{id:2,template_name:"oto",template_file:"/math/oto.html"},{id:3,template_name:"standard",template_file:"/math/default2018.html"},{id:4,template_name:"invigilate",template_file:"/math/invigilate.html"}],contract_templates_by_session:{1:[1,2],2:[3,4]},instructors:[{id:1e3,last_name:"Smith",first_name:"Henry",email:"hery.smith@utoronto.ca",utorid:"smithh"},{id:1001,last_name:"Garcia",first_name:"Emily",email:"emily.garcia@utoronto.ca",utorid:"garciae"},{id:1002,last_name:"Miller",first_name:"Megan",email:"megan.miller@utoronto.ca",utorid:"millerm"},{id:1003,last_name:"Beera",first_name:"Lizzy",email:"lizzy.beera@utoronto.ca",utorid:"beeral"}],positions_by_session:{1:[10,11,14,15,16],2:[12,13]},positions:[{id:10,position_code:"MAT135H1F",position_title:"Calculus I",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:1,duties:"Tutorials",qualifications:"Teaching skill",ad_hours_per_assignment:70,ad_num_assignments:15,ad_open_date:"2019-08-01T00:00:00.000Z",ad_close_date:"2019-08-15T00:00:00.000Z",desired_num_assignments:15,current_enrollment:1200,current_waitlisted:200,instructor_ids:[1e3,1001],instructor_preferences:[{preference_level:2,applicant_id:2e3,instructor_id:1e3},{preference_level:1,applicant_id:2002,instructor_id:1e3},{preference_level:-1,applicant_id:2005,instructor_id:1001},{preference_level:1,applicant_id:2002,instructor_id:1001},{preference_level:1,applicant_id:2006,instructor_id:1001}]},{id:11,position_code:"MAT136H1F",position_title:"Calculus II",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:2,instructor_ids:[]},{id:12,position_code:"CSC135H1F",position_title:"Computer Fun",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",duties:"Tutorials",contract_template_id:3,instructor_ids:[1e3],instructor_preferences:[{preference_level:-1,applicant_id:2005,instructor_id:1e3},{preference_level:2,applicant_id:2001,instructor_id:1e3},{preference_level:1,applicant_id:2006,instructor_id:1e3}]},{id:13,position_code:"MAT235H1F",position_title:"Calculus III",hours_per_assignment:70,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",contract_template_id:3,instructor_ids:[1002],instructor_preferences:[{preference_level:2,applicant_id:2e3,instructor_id:1002},{preference_level:1,applicant_id:2002,instructor_id:1002}]},{instructor_ids:[1002],position_code:"CSC100H1S",position_title:"Computers for Humans",hours_per_assignment:100,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",contract_template_id:1,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:14},{instructor_ids:[1e3],position_code:"MAT137Y1Y",position_title:"Calculus!",hours_per_assignment:250,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",contract_template_id:1,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",qualifications:"Skilled Proofs Reader",current_enrollment:1500,current_waitlisted:78,desired_num_assignments:22,id:15},{instructor_ids:[1001],position_code:"MAT135H1F Head TA",position_title:"Calculus I",hours_per_assignment:225,duties:"Top-notch Head TA Stuff",contract_template_id:1,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",desired_num_assignments:3,id:16}],applicants:[{id:2e3,utorid:"weasleyr",student_number:"89013443",first_name:"Ron",last_name:"Weasley",email:"ron@potter.com",phone:"543-223-9993"},{id:2001,utorid:"potterh",student_number:"999666999",first_name:"Harry",last_name:"Potter",email:"harry@potter.com"},{id:2002,utorid:"smithb",email:"smithb@mail.utoronto.ca",first_name:"Bethany",last_name:"Smith",student_number:"131382748"},{id:2003,utorid:"wilsonh",email:"wilsonh@mail.utoronto.ca",first_name:"Hanna",last_name:"Wilson",student_number:"600366904"},{id:2004,utorid:"molinat",email:"molinat@mail.utoronto.ca",first_name:"Troy",last_name:"Molina",student_number:"328333023"},{id:2005,utorid:"howeyb",email:"howeyb@mail.utoronto.ca",first_name:"Brett",last_name:"Howey",student_number:"329613524"},{id:2006,utorid:"brownd",email:"brownd@mail.utoronto.ca",first_name:"David",last_name:"Brown",student_number:"29151485"}],assignments_by_session:{1:[100,101,102,103,104,105,106,107,108,109],2:[]},assignments:[{id:100,position_id:10,applicant_id:2001,hours:90},{id:101,position_id:10,applicant_id:2005,hours:95},{note:"",position_id:16,applicant_id:2e3,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",id:102},{note:"",position_id:16,applicant_id:2002,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",id:103},{note:"",position_id:15,applicant_id:2001,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:104},{note:"",position_id:15,applicant_id:2002,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:105},{note:"",position_id:15,applicant_id:2005,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:106},{note:"",position_id:15,applicant_id:2e3,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:107},{note:"",position_id:15,applicant_id:2006,start_date:"2019-09-02T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:108},{note:"",position_id:14,applicant_id:2002,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z",id:109}],wage_chunks:[{id:3e3,assignment_id:100,hours:20,start_date:"2019-09-08T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z",rate:10.01},{id:3001,assignment_id:100,hours:35,start_date:"2020-01-01T00:00:00.000Z",end_date:"2020-04-20T00:00:00.000Z",rate:12.02},{id:3002,assignment_id:101,hours:95,start_date:"2019-09-01T00:00:00.000Z",end_date:"2020-04-20T00:00:00.000Z",rate:null},{id:3003,assignment_id:102,hours:225,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z"},{id:3004,assignment_id:103,hours:225,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T00:00:00.000Z"},{id:3005,assignment_id:104,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3006,assignment_id:104,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3007,assignment_id:105,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3008,assignment_id:105,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3009,assignment_id:106,hours:125,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3010,assignment_id:106,hours:125,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3011,assignment_id:107,hours:100,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3012,assignment_id:107,hours:100,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3013,assignment_id:108,hours:100,start_date:"2019-09-02T00:00:00.000Z",end_date:"2019-12-31T05:00:00.000Z"},{id:3014,assignment_id:108,hours:100,start_date:"2020-01-01T05:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"},{id:3015,assignment_id:109,hours:100,start_date:"2021-01-01T00:00:00.000Z",end_date:"2020-04-03T00:00:00.000Z"}],offers:[{id:1e4,assignment_id:100,status:"withdrawn"},{id:10001,assignment_id:100,status:"pending"},{id:10002,assignment_id:101,status:"accepted"},{id:10003,assignment_id:102,status:"withdrawn"}],applications:[{comments:"",program:"Phd",department:"Computer Science",previous_uoft_ta_experience:"Last year I TAed a bunch",yip:2,annotation:"",session_id:1,applicant_id:2e3,position_preferences:[{preference_level:2,position_id:10},{preference_level:3,position_id:15}]},{comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2001,position_preferences:[{preference_level:0,position_id:12},{preference_level:3,position_id:13}]},{comments:"",program:"Phd",department:"Math",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2002,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{comments:"",program:"Phd",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2005,position_preferences:[{preference_level:2,position_id:10},{preference_level:3,position_id:13},{preference_level:0,position_id:12},{preference_level:1,position_id:11}]},{comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:1,applicant_id:2006,position_preferences:[{preference_level:3,position_id:10},{preference_level:0,position_id:13},{preference_level:2,position_id:12}]},{comments:"",program:"UG",department:"Math",previous_uoft_ta_experience:"",yip:3,annotation:"",session_id:2,applicant_id:2002,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{comments:"",program:"MSc",department:"Computer Science",previous_uoft_ta_experience:"",yip:2,annotation:"",session_id:2,applicant_id:2003,position_preferences:[{preference_level:3,position_id:10},{preference_level:3,position_id:13},{preference_level:2,position_id:12},{preference_level:0,position_id:11}]},{comments:"",program:"UG",department:"Computer Science",previous_uoft_ta_experience:"",yip:4,annotation:"",session_id:2,applicant_id:2004,position_preferences:[{preference_level:1,position_id:10},{preference_level:3,position_id:13}]}],users:[{email:"hery.smith@utoronto.ca",utorid:"smithh",roles:["admin","instructor"]},{email:"emily.garcia@utoronto.ca",utorid:"garciae",roles:["instructor"]},{email:"megan.miller@utoronto.ca",utorid:"millerm",roles:["instructor"]},{email:"lizzy.beera@utoronto.ca",utorid:"beeral",roles:["instructor"]}],active_user:"smithh"},l=n(16),d=n(13),p=n(70),m=n(15),f=n(7),h=n(8),_=n(24);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=e.map(function(e){return+e[t]}).filter(function(e){return null!=e}),a=Math.max.apply(Math,[0].concat(Object(_.a)(n)));return isNaN(a)?"id-"+Math.round(1e4*Math.random()):a+1}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return t.find(function(t){return t[n]==e[n]})}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return e=e.map(function(e){return""+e}),t.filter(function(t){return e.includes(""+t[n])})}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.splice(t.indexOf(e),1)}function b(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:{required:!0,unique:!0}},a=0,r=Object.entries(n);a<r.length;a++){var i=r[a],s=Object(h.a)(i,2),o=s[0],c=s[1];if(c.required&&(null==e[o]||""===e[o]))return"Property ".concat(o," cannot be empty");if(c.unique&&g(e,t,o))return"Duplicate entry exists for property ".concat(o," with value ").concat(e[o])}return!1}var y=function(){function e(t,n){Object(i.a)(this,e),this.data=t,this.ownData=n}return Object(s.a)(e,[{key:"findAll",value:function(){return Object(_.a)(this.ownData)}},{key:"find",value:function(e){return this.rawFind(e)}},{key:"rawFind",value:function(e){return null==e?null:null!=e.id?g(e,this.ownData):g({id:e},this.ownData)}},{key:"delete",value:function(e){if(!(e=this.rawFind(e)))throw new Error("Cannot delete object ".concat(JSON.stringify(e)));return S(e,this.ownData),e}},{key:"unusedId",value:function(){if(!this.ownData)throw new Error("Cannot get unused ID when `ownData` hasn't been set");return v(this.ownData)}},{key:"create",value:function(e){var t=v(this.ownData),n=Object(f.a)({},e,{id:t});return this.ownData.push(n),n}},{key:"validateNew",value:function(){throw new Error("Subclasses must impliment `validateNew()`")}},{key:"updateIfFound",value:function(e){var t=this.rawFind(e);if(!t)return null;for(var n in e)null!=n&&(t[n]=e[n]);return t}},{key:"upsert",value:function(e){return this.rawFind(e)?this.updateIfFound(e):(this.validateNew(e),this.create(e))}}]),e}(),O=n(3),w=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e,e.sessions))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"create",value:function(e){var n=Object(p.a)(Object(d.a)(t.prototype),"create",this).call(this,e);return this.data.assignments_by_session[n.id]=[],n}},{key:"validateNew",value:function(e){var t=b(e,this.ownData,{name:{required:!0,unique:!0}});if(t)throw new Error(t)}}]),t}(y),C={get:{"/sessions":Object(O.b)({func:function(e){return new w(e).findAll()},summary:"Get all available sessions",returns:O.d.arrayOf(O.a.session)})},post:{"/sessions":Object(O.b)({func:function(e,t,n){return new w(e).upsert(n)},summary:"Upsert a session",returns:O.a.session,posts:O.a.session}),"/sessions/delete":Object(O.b)({func:function(e,t,n){return new w(e).delete(n)},summary:"Delete a session",posts:O.a.idOnly,returns:O.a.session})}},T=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(d.a)(t).call(this,e))).ownData=n.data.contract_templates,n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"validateNew",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=b(e,this.ownData,{template_name:{required:!0},template_file:{required:!0}});if(n)throw new Error(n);if(t){var a=b(e,this.findAllBySession(t),{template_name:{required:!0,unique:!0}});if(a)throw new Error(a)}}},{key:"findAllBySession",value:function(e){var t=new w(this.data).find(e);return E(this.data.contract_templates_by_session[t.id]||[],this.ownData)}},{key:"upsertBySession",value:function(e,t){var n=new w(this.data).find(t);this.find(e)||this.validateNew(e,n);var a=this.upsert(e);return this.data.contract_templates_by_session[n.id]=this.data.contract_templates_by_session[n.id]||[],this.data.contract_templates_by_session[n.id].push(a.id),a}}]),t}(y),j={get:{"/available_contract_templates":Object(O.b)({func:function(e){return Object(_.a)(e.available_contract_templates)},summary:"Get all available contract templates (these are literal files on the server).",returns:O.d.arrayOf(O.a.contractTemplateMinimal)}),"/sessions/:session_id/contract_templates":Object(O.b)({func:function(e,t){return new T(e).findAllBySession(t.session_id)},summary:"Get contract templates associated with this session.",returns:O.d.arrayOf(O.a.contractTemplate)})},post:{"/sessions/:session_id/contract_templates":Object(O.b)({func:function(e,t,n){return new T(e).upsertBySession(n,t.session_id)},summary:"Associate a position template with a session; this method upserts",posts:O.a.contractTemplate,returns:O.a.contractTemplate})}},A=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e,e.positions))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"validateNew",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){var n=b(e,this.findAllBySession(t),{position_code:{required:!0,unique:!0}});if(n)throw new Error(n)}}},{key:"delete",value:function(e){var n=this.rawFind(e);if(!n)throw new Error("Cannot find position matching ".concat(JSON.stringify(e)));Object(p.a)(Object(d.a)(t.prototype),"delete",this).call(this,n);for(var a=0,r=Object.values(this.data.positions_by_session);a<r.length;a++){var i=r[a];i.includes(n.id)&&S(n.id,i)}return n}},{key:"findAllBySession",value:function(e){var t=new w(this.data).find(e);return E(this.data.positions_by_session[t.id]||[],this.ownData)}},{key:"upsertBySession",value:function(e,t){var n=new w(this.data).rawFind(t);this.rawFind(e)||this.validateNew(e,n);var a=this.upsert(e);return this.data.positions_by_session[n.id]=this.data.positions_by_session[n.id]||[],this.data.positions_by_session[n.id].push(a.id),a}},{key:"findAssociatedSession",value:function(e){var t=this,n=this.find(e);if(!n)throw new Error("Could not associated session because there is no position matching ".concat(JSON.stringify(e)));var a=Object.keys(this.data.positions_by_session).find(function(e){return t.data.positions_by_session[e].includes(n.id)});return null!=a?+a:a}}]),t}(y),N={get:{"/sessions/:session_id/positions":Object(O.b)({func:function(e,t){return new A(e).findAllBySession(t.session_id)},summary:"Get positions associated with this session.",returns:O.d.arrayOf(O.a.position)})},post:{"/sessions/:session_id/positions":Object(O.b)({func:function(e,t,n){return new A(e).upsertBySession(n,t.session_id)},summary:"Upsert a position associated with a session. If a new position is created, it will be automatically associated with the given session",posts:O.a.position,returns:O.a.position}),"/positions":Object(O.b)({func:function(e,t,n){var a=g(n,e.positions);if(a)return Object.assign(a,n);throw new Error("Cannot find position with id=".concat(n.id))},summary:"Update a position",posts:O.a.position,returns:O.a.position}),"/positions/delete":Object(O.b)({func:function(e,t,n){return new A(e).delete(n)},summary:"Delete a position",posts:O.a.idOnly,returns:O.a.session})}},k=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e,e.instructors))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"validateNew",value:function(e){var t=b(e,this.ownData,{utorid:{required:!0,unique:!0},first_name:{required:!0},last_name:{required:!0}});if(t)throw new Error(t)}},{key:"delete",value:function(e){var n=this.find(e);if(!n)throw new Error("Cannot find instructor matching ".concat(JSON.stringify(e)));Object(p.a)(Object(d.a)(t.prototype),"delete",this).call(this,n);var a=!0,r=!1,i=void 0;try{for(var s,o=this.data.positions[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value;(c.instructor_ids||[]).includes(n.id)&&S(n.id,c.instructor_ids)}}catch(u){r=!0,i=u}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}}]),t}(y),x={get:{"/instructors":Object(O.b)({func:function(e){return new k(e).findAll()},summary:"Get a list of all instructors",returns:O.d.arrayOf(O.a.instructor)})},post:{"/instructors":Object(O.b)({func:function(e,t,n){return new k(e).upsert(n)},summary:"Upsert an instructor",posts:O.a.instructor,returns:O.a.instructor}),"/instructors/delete":Object(O.b)({func:function(e,t,n){return new k(e).delete(n)},summary:"Delete an instructor (removes from all positions)",posts:O.a.idOnly,returns:O.a.instructor})}},I=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e,e.wage_chunks))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"validateNew",value:function(){}},{key:"findAllByAssignment",value:function(e){var t=new D(this.data).rawFind(e);if(!t)throw new Error("Could not find assignment matching ".concat(JSON.stringify(e)));return E([t.id],this.ownData,"assignment_id")}},{key:"upsertByAssignment",value:function(e,t){var n=new D(this.data).rawFind(t);if(!n)throw new Error("Could not find assignment matching ".concat(JSON.stringify(t)));return this.upsert(Object(f.a)({},e,{assignment_id:n.id}))}},{key:"setAllByAssignment",value:function(e,t){var n=this,a=this.rawFind(t);if(!a)throw new Error("Could not find assignment matching ".concat(JSON.stringify(t)));var r=this.findAllByAssignment(t),i=!0,s=!1,o=void 0;try{for(var c,u=r[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value;g(l,e)||this.delete(l)}}catch(d){s=!0,o=d}finally{try{i||null==u.return||u.return()}finally{if(s)throw o}}return e.forEach(function(e){return n.upsertByAssignment(e,a)}),this.findAllByAssignment(a)}}]),t}(y),F={get:{},post:{"/wage_chunks":Object(O.b)({func:function(e,t,n){return new I(e).upsert(n)},posts:O.a.wageChunk,summary:"Upsert a wage_chunk",returns:O.a.wageChunk}),"/wage_chunks/delete":Object(O.b)({func:function(e,t,n){return new I(e).delete(n)},posts:O.a.wageChunk,summary:"Delete a wage_chunk. Must have a valid id specified.",returns:O.a.wageChunk})}},D=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e,e.assignments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"validateNew",value:function(e){var t=b(e,[],{position_id:{required:!0},applicant_id:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var n=this,a=new w(this.data).rawFind(e);return E(this.data.assignments_by_session[a.id]||[],this.ownData).map(function(e){return new t(n.data).find(e)})}},{key:"getWageChunkInfo",value:function(e){var t=new I(this.data).findAllByAssignment(e);return{hours:function(){for(var e=0,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=0,i=n;r<i.length;r++)e+=+i[r];return e}.apply(void 0,Object(_.a)(t.map(function(e){return e.hours}))),wageChunks:t}}},{key:"getActiveOffer",value:function(e){return new P(this.data).findByAssignment(e)}},{key:"find",value:function(e){var t=this.rawFind(e);if(!t)return t;var n=Object(f.a)({},t),a=this.getWageChunkInfo(t).hours;Object.assign(n,{hours:a});var r=this.getActiveOffer(t);return r&&Object.assign(n,{active_offer_status:r.status}),n}},{key:"upsert",value:function(e){var n=this.find(Object(p.a)(Object(d.a)(t.prototype),"upsert",this).call(this,e));if(null==e.hours||+n.hours===+e.hours)return n;var a=new A(this.data).findAssociatedSession(n.position_id);a&&this.data.assignments_by_session[a].push(n.id);var r=new I(this.data).findAllByAssignment(n);if(0===r.length){var i=function(e,t){e=new Date(e),t=new Date(t);var n=new Date(e.getFullYear(),11,31),a=new Date(e.getFullYear(),12,1);return e<=n&&t>n?[{start_date:e.toISOString(),end_date:n.toISOString()},{start_date:a.toISOString(),end_date:t.toISOString()}]:[{start_date:e.toISOString(),end_date:t.toISOString()}]}(n.start_date,n.end_date),s=!0,o=!1,c=void 0;try{for(var u,l=i[Symbol.iterator]();!(s=(u=l.next()).done);s=!0){var m=u.value;new I(this.data).upsertByAssignment({hours:0,start_date:m.start_date,end_date:m.end_date},n)}}catch(y){o=!0,c=y}finally{try{s||null==l.return||l.return()}finally{if(o)throw c}}}r=new I(this.data).findAllByAssignment(n);var h=(+e.hours-+(this.find(n).hours||0))/r.length,_=!0,v=!1,g=void 0;try{for(var E,S=r[Symbol.iterator]();!(_=(E=S.next()).done);_=!0){var b=E.value;new I(this.data).upsert(Object(f.a)({},b,{hours:(b.hours||0)+h}))}}catch(y){v=!0,g=y}finally{try{_||null==S.return||S.return()}finally{if(v)throw g}}return this.find(n)}}]),t}(y),P=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e,e.offers))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"findByAssignment",value:function(e){var t=E([this._ensureAssignment(e).id],this.data.offers,"assignment_id"),n=t[t.length-1];return n&&("accepted"===n.status||"rejected"===n.status||"pending"===n.status)?n:null}},{key:"_ensureAssignment",value:function(e){var t=new D(this.data).rawFind(e);if(!t)throw new Error("Could not find assignment matching ".concat(JSON.stringify(e)));return t}},{key:"withdrawByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.upsert(Object(f.a)({},t,{status:"withdrawn",withdrawn_date:(new Date).toISOString()}))}},{key:"rejectByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.upsert(Object(f.a)({},t,{status:"rejected",rejected_date:(new Date).toISOString()}))}},{key:"acceptByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.upsert(Object(f.a)({},t,{status:"accepted",accepted_date:(new Date).toISOString()}))}},{key:"emailByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));return this.upsert(Object(f.a)({},t,{status:"pending",emailed_date:(new Date).toISOString()}))}},{key:"nagByAssignment",value:function(e){var t=this.findByAssignment(this._ensureAssignment(e));if(!t.emailed_date)throw new Error("The ative offer for assignment with id=".concat(e.id," has not been emailed yet, so a nag email cannot be sent"));return this.upsert(Object(f.a)({},t,{nag_count:(t.nag_count||0)+1}))}},{key:"createByAssignment",value:function(e){var t=this._ensureAssignment(e);if(this.findByAssignment(t))throw new Error("An offer already exists for assignment=".concat(JSON.stringify(e)));return this.create({assignment_id:t.assignment_id,status:"pending"})}}]),t}(y),R={get:{"/sessions/:session_id/assignments":Object(O.b)({func:function(e,t){return new D(e).findAllBySession(t.session_id)},summary:"Get assignments associated with a session",returns:O.d.arrayOf(O.a.assignment)}),"/assignments/:assignment_id":Object(O.b)({func:function(e,t){return new D(e).find(t.assignment_id)},summary:"Get an assignment",returns:O.a.assignment}),"/assignments/:assignment_id/active_offer":Object(O.b)({func:function(e,t){return new D(e).getActiveOffer(t.assignment_id)},summary:"Get the active offer associated with an assignment",returns:O.a.offer}),"/assignments/:assignment_id/wage_chunks":Object(O.b)({func:function(e,t){return new D(e).getWageChunkInfo(t.assignment_id).wageChunks},summary:"Get the wage_chunks associated with an assignment",returns:O.d.arrayOf(O.a.wageChunk)})},post:{"/assignments":Object(O.b)({func:function(e,t,n){return new D(e).upsert(n)},posts:O.a.assignment,summary:"Upsert an assignment",returns:O.a.assignment}),"/assignments/:assignment_id/wage_chunks":Object(O.b)({func:function(e,t,n){return new I(e).setAllByAssignment(n,t.assignment_id)},summary:"Sets the wage chunks of an assignment to the specified list. The contents of the list are upserted. Omitted wage chunks are deleted.",posts:O.d.arrayOf(O.a.wageChunk),returns:O.d.arrayOf(O.a.wageChunk)}),"/assignments/:assignment_id/active_offer/withdraw":Object(O.b)({func:function(e,t){return new P(e).withdrawByAssignment(t.assignment_id)},summary:"Withdraws the active offer for the specified assignment",returns:O.a.offer}),"/assignments/:assignment_id/active_offer/reject":Object(O.b)({func:function(e,t){return new P(e).rejectByAssignment(t.assignment_id)},summary:"Rejects the active offer for the specified assignment",returns:O.a.offer}),"/assignments/:assignment_id/active_offer/accept":Object(O.b)({func:function(e,t){return new P(e).acceptByAssignment(t.assignment_id)},summary:"Accepts the active offer for the specified assignment",returns:O.a.offer}),"/assignments/:assignment_id/active_offer/create":Object(O.b)({func:function(e,t){return new P(e).createByAssignment(t.assignment_id)},summary:"Creates an offer for the specified assignment, provided there are no active offers for this assignment.",returns:O.a.offer}),"/assignments/:assignment_id/active_offer/email":Object(O.b)({func:function(e,t){return new P(e).emailByAssignment(t.assignment_id)},summary:"Emails the active offer for the specified assignment",returns:O.a.offer}),"/assignments/:assignment_id/active_offer/nag":Object(O.b)({func:function(e,t){return new P(e).nagByAssignment(t.assignment_id)},summary:"Sends a nag email for the active offer for the specified assignment which has already been emailed once",returns:O.a.offer})}},U=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e,e.applicants))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"validateNew",value:function(e){var t=b(e,this.ownData,{utorid:{required:!0,unique:!0},first_name:{required:!0},last_name:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=new w(this.data).find(e);if(!t)throw new Error("Cannot find applicant by session because session ".concat(JSON.stringify(e)," cannot be found"));var n=E([t.id],this.data.applications,"session_id").map(function(e){return e.applicant_id});return E(n,this.ownData)}}]),t}(y),H={get:{"/sessions/:session_id/applicants":Object(O.b)({func:function(e,t){return new U(e).findAllBySession(t.session_id)},summary:"Get all applicants associated with the given session",returns:O.d.arrayOf(O.a.applicant)}),"/applicants":Object(O.b)({func:function(e){return new U(e).findAll()},summary:"Get all applicants",returns:O.d.arrayOf(O.a.applicant)}),"/applicants/:applicant_id":Object(O.b)({func:function(e,t){return new U(e).find(t.applicant_id)},summary:"Get an applicant",returns:O.d.arrayOf(O.a.applicant)})},post:{"/applicants":Object(O.b)({func:function(e,t,n){return new U(e).upsert(n)},summary:"Upsert an applicant",posts:O.a.applicant,returns:O.a.applicant})}},L=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e,e.applications))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"validateNew",value:function(e){var t=b(e,this.ownData,{session_id:{required:!0},applicant_id:{required:!0}});if(t)throw new Error(t)}},{key:"findAllBySession",value:function(e){var t=new w(this.data).find(e);if(!t)throw new Error("Cannot find applicant by session because session ".concat(JSON.stringify(e)," cannot be found"));return E([t.id],this.ownData,"session_id")}}]),t}(y),B={get:{"/sessions/:session_id/applications":Object(O.b)({func:function(e,t){return new L(e).findAllBySession(t.session_id)},summary:"Get all applications associated with the given session",returns:O.d.arrayOf(O.a.application)})},post:{"/applications":Object(O.b)({func:function(e,t,n){return new L(e).upsert(n)},summary:"Upsert an application",posts:O.a.application,returns:O.a.application})}},q=function(e){function t(e){return Object(i.a)(this,t),Object(l.a)(this,Object(d.a)(t).call(this,e,e.users))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"rawFind",value:function(e){return null==e?null:null!=e.utorid?g(e,this.ownData,"utorid"):g({utorid:e},this.ownData,"utorid")}},{key:"setActiveUser",value:function(e){var t=this.find(e);if(!t)throw new Error("Cannot find user ".concat(JSON.stringify(e)," to set as active"));this.data.active_user=t.utorid}},{key:"getActiveUser",value:function(){return this.find(this.data.active_user)}}]),t}(y),Z={get:{"/users":Object(O.b)({func:function(e){return new q(e).findAll()},summary:"Get all available contract templates (these are literal files on the server).",returns:O.d.arrayOf(O.a.user)}),"/active_user":Object(O.b)({func:function(e){return new q(e).getActiveUser()},summary:"Gets the currently active user.",returns:O.d.arrayOf(O.a.user),roles:["instructor","ta"]})},post:{"/users":Object(O.b)({func:function(e,t,n){return new q(e).upsert(n)},summary:"Upserts user info",returns:O.d.arrayOf(O.a.user),posts:O.a.user})}},G={},M=function(){function e(t){Object(i.a)(this,e),this.data=t}return Object(s.a)(e,[{key:"getAllData",value:function(){return this.data}},{key:"makeSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"snapshot";return G[e]=JSON.stringify(this.getAllData()),this.getAllData()}},{key:"clearData",value:function(){var e=this;return this.makeSnapshot("beforeclear"),Object.keys(this.data).forEach(function(t){return delete e.data[t]}),this.getAllData()}},{key:"restoreSnapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"snapshot",t=JSON.parse(G[e]||"{}");return this.clearData(),Object.assign(this.data,t),this.getAllData()}}]),e}(),W={get:{},post:{"/debug/active_user":Object(O.b)({func:function(e,t,n){return new q(e).upsert(n)},summary:"Sets the active user; this will override whatever credentials are passed to the server.",returns:O.d.arrayOf(O.a.user),posts:O.a.user}),"/debug/clear_data":Object(O.b)({func:function(e){return new M(e).clearData()},summary:"Deletes all data in the database"}),"/debug/snapshot":Object(O.b)({func:function(e){return new M(e).makeSnapshot()},summary:"Makes a snapshot of the current state of the database"}),"/debug/restore_snapshot":Object(O.b)({func:function(e){return new M(e).restoreSnapshot()},summary:"Restores the last snapshot of the database"})}};n.d(t,"MockAPI",function(){return J}),n.d(t,"mockAPI",function(){return K}),n.d(t,"mockData",function(){return u});var J=function(){function e(t){var n=this;Object(i.a)(this,e),this.routePrefix="/api/v1",this.getRoutes=Object.assign({},C.get,j.get,N.get,x.get,R.get,H.get,B.get,F.get,W.get,Z.get,{"/all_data":Object(O.b)({func:function(e){return e},exclude:!0})}),this.postRoutes=Object.assign({},C.post,j.post,N.post,x.post,R.post,H.post,B.post,F.post,W.post,Z.post),this.apiGET=function(e){var t=!0,a=!1,r=void 0;try{for(var i,s=n._getRoutesParsers[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var o=i.value,c=o.match(e);if(c)try{var u=n.getRoutes[o.spec](n.data,c);if(null==u)throw new Error("Could not find data for route ".concat(o.spec," with params ").concat(JSON.stringify(c)));return{status:"success",message:"",payload:u}}catch(l){return{status:"error",message:l.toString()}}}}catch(d){a=!0,r=d}finally{try{t||null==s.return||s.return()}finally{if(a)throw r}}return{status:"error",message:"could not find route matching ".concat(e)}},this.apiPOST=function(e,t){var a=!0,r=!1,i=void 0;try{for(var s,o=n._postRoutesParsers[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value,u=c.match(e);if(u)try{return{status:"success",message:"",payload:n.postRoutes[c.spec](n.data,u,t)}}catch(l){return{status:"error",message:l.toString()}}}}catch(d){r=!0,i=d}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return{status:"error",message:"could not find route matching ".concat(e)}},this.active=!1,this.data=t,this._getRoutesParsers=Object.keys(this.getRoutes).map(function(e){var t=new c.a("(/:role)"+e);return t.spec=e,t}),this._postRoutesParsers=Object.keys(this.postRoutes).map(function(e){var t=new c.a("(/:role)"+e);return t.spec=e,t})}return Object(s.a)(e,[{key:"replaceGlobalFetch",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.active||(this.active=!0,this._origFetch=fetch,window.fetch=function(n){var a,i,s,o,c,u=arguments;return r.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},i=new URL(n,"http://dummy.com"),n=(n=i.pathname).startsWith(e.routePrefix)?n.replace(e.routePrefix,""):n,"GET"===a.method?s=e.apiGET(n):("string"===typeof(o=a.body)&&(o=JSON.parse(o)),s=e.apiPOST(n,o)),console.log("MockAPI ".concat(a.method," Request."),n,a,"Reponding with",s),c=new Response(new Blob([JSON.stringify(s)],{type:"application/json"}),{status:200,statusText:"OK"}),r.abrupt("return",new Promise(function(e){window.setTimeout(function(){return e(c)},t)}));case 8:case"end":return r.stop()}})})}},{key:"restoreGlobalFetch",value:function(){this.active=!1,window.fetch=this._origFetch||fetch}}]),e}(),K=new J(u)},3:function(e,t,n){"use strict";n.d(t,"d",function(){return _}),n.d(t,"c",function(){return O}),n.d(t,"b",function(){return w}),n.d(t,"a",function(){return v});var a=n(7),r=n(29),i=n(8),s=n(24),o=n(12),c=n(14),u=n(1),l=n.n(u),d=n(121),p=n.n(d),m=n(157),f=function(){function e(t,n){Object(o.a)(this,e),this.name=t,this.args=n}return Object(c.a)(e,[{key:"toString",value:function(){return null==this.args?""+this.name:this.name+"("+this.args.join(", ")+")"}}]),e}();function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.concat([new f(t,n)])}var _=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Proxy(t,{get:function(t,a,r){if("callChain"===a)return n;if("toJSON"===a)return function(){return n};var i=Reflect.get(t,a,r);return i instanceof Object?e(i,h(n,a)):i},apply:function(t,a,r){var i=n.pop()||{name:"<root>"},s=Reflect.apply(t,a,r);return s instanceof Object?e(s,h(n,i.name,r)):s},ownKeys:function(e){return[].concat(Object(s.a)(Reflect.ownKeys(e)),["callChain","toJSON"])}})}(l.a),v=Object(m.a)(_),g={string:"string",number:"number",bool:"boolean",object:"object",array:"array",any:{}};function E(e){var t={};if(e.callChain){var n=Object(i.a)(e.callChain,2),a=n[0],r=[];if(n[1]&&(t.required=!0),a.args)switch(a.name){case"shape":t.type="object",t.properties={};for(var s=0,o=Object.entries(a.args[0]);s<o.length;s++){var c=o[s],u=Object(i.a)(c,2),l=u[0],d=E(u[1]);d.required&&(r.push(l),delete d.required),t.properties[l]=d}r.length>0&&(t.required=r);break;case"arrayOf":t.type="array",t.items=E(a.args[0]);break;case"oneOf":t.type="string",t.enum=a.args[0];break;case"oneOfType":t.oneOf=a.args[0].map(E)}else g[a.name]&&(t.type=g[a.name])}else console.warn("Attempting to compute swagger values for non-wrapped object",e);return t}function S(){return{type:"object",properties:{status:{type:"string",enum:["success","error"]},message:{type:"string"},payload:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"object"}},required:["status"]}}function b(e){for(var t=p()(e),n=Object.keys(t.match(t.spec)),a={},r=0,i=n;r<i.length;r++){var s=i[r];a[s]="{"+s+"}"}return{url:decodeURI(t.reverse(a)),templateVars:n}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={responses:{default:{}}};if(!e)return n;var a=["admin"].concat(Object(s.a)(e.roles||[]));return n.summary="(prefixes: ".concat(a.map(function(e){return"/"+e}).join(", "),") ")+e.summary,t.length>0&&(n.parameters=t.map(function(e){return{name:e,in:"path",description:e,required:!0}})),e.returns&&(n.responses.default={content:{"application/json":{schema:S(E(e.returns))}}}),e.posts&&(n.requestBody={content:{"application/json":{schema:E(e.posts)}}}),n}function O(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getRoutes,n=void 0===t?{}:t,a=e.postRoutes,r=void 0===a?{}:a,s={},o=0,c=Object.entries(n);o<c.length;o++){var u=c[o],l=Object(i.a)(u,2),d=l[0],p=l[1],m=b(d),f=m.url,h=m.templateVars;p.docs&&p.docs.exclude||(s[f]=Object.assign(s[f]||{},{get:y(p.docs,h)}))}for(var _=0,v=Object.entries(r);_<v.length;_++){var g=v[_],E=Object(i.a)(g,2),S=E[0],O=E[1],w=b(S),C=w.url,T=w.templateVars;O.docs&&O.docs.exclude||(s[C]=Object.assign(s[C]||{},{post:y(O.docs,T)}))}for(var j=Array.from(new Set(Object.keys(s).map(function(e){return e.split("/")[1]}).filter(function(e){return e}))),A=function(){var e=k[N],t=(x=Object(i.a)(e,2))[0],n=x[1],a=j.filter(function(e){return t.includes(e)});n.get&&a.length>0&&(n.get.tags=a),n.post&&a.length>0&&(n.post.tags=a)},N=0,k=Object.entries(s);N<k.length;N++){var x;A()}var I={},F=!0,D=!1,P=void 0;try{for(var R,U=Object.keys(s).sort()[Symbol.iterator]();!(F=(R=U.next()).done);F=!0){var H=R.value;I[H]=s[H]}}catch(L){D=!0,P=L}finally{try{F||null==U.return||U.return()}finally{if(D)throw P}}return I}function w(e){var t=e.func,n=e.exclude,i=void 0!==n&&n,s=Object(r.a)(e,["func","exclude"]),o=function(){return t.apply(void 0,arguments)};return o.docs=Object(a.a)({exclude:i},s),o}},387:function(e,t,n){e.exports=n(886)},396:function(e,t,n){},412:function(e,t){},811:function(e,t){},813:function(e,t){},822:function(e,t,n){},823:function(e,t,n){},824:function(e,t,n){},886:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(21),s=n.n(i),o=n(10),c=n(87),u=n(368),l=n(7),d=n(72),p=(n(396),n(898)),m=n(897),f=n(8),h=n(889),_=n(370);function v(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,n=new URLSearchParams,a=0,r=Object.entries(e);a<r.length;a++){var i=r[a],s=Object(f.a)(i,2),o=s[0],c=s[1];n.append(o,JSON.stringify(c))}if(window.history.pushState&&(""+n).length>0){var u=new URL(t);u.search="?"+n,""+(u=""+u)!==""+t&&window.history.pushState({path:u},"",u)}return{type:"SET_GLOBALS",payload:e}}var g={replaceGlobalFetch:function(){},restoreGlobalFetch:function(){}};function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fetchSessions,a=void 0===n?function(){}:n,r=t.active,i=t._setActive,s=void 0===i?function(){}:i;e!==r&&(t.setGlobals(Object(l.a)({},t.globals,{mockAPI:e})),!0===e?g.replaceGlobalFetch():g.restoreGlobalFetch(),s(g.active),a())}var S=function(e){var t=r.a.useState(g.active),n=Object(f.a)(t,2),a=n[0],i=n[1],s=Object(l.a)({},e,{active:a,_setActive:i});return r.a.useEffect(function(){!0===e.globals.mockAPI&&E(!0,s)},[e.globals]),r.a.createElement("span",{title:"The Mock API simulates the TAPP API but uses browser-based storage. This allows you to test TAPP functionality without a working server."},"Mock API"," ",r.a.createElement(h.a,null,r.a.createElement(_.a,{variant:a?"primary":"secondary",onClick:function(){return E(!0,s)}},"On"),r.a.createElement(_.a,{variant:a?"secondary":"primary",onClick:function(){return E(!1,s)}},"Off")))},b=n(241);g=b.mockAPI,S=Object(o.connect)(function(e){return{globals:e.ui.globals}},{setGlobals:v})(S);var y=n(4),O=n.n(y),w=n(1),C=n.n(w),T=n(20),j=n(61),A=n.n(j),N={position:"tr",autoDismiss:10,title:"Error"},k=function(e){return Object(j.error)(Object(l.a)({},N,{title:"Error fetching data",message:e}))},x=function(e){return Object(j.error)(Object(l.a)({},N,{title:"Error updating/inserting data",message:e}))},I=function(e){return Object(j.error)(Object(l.a)({},N,{title:"Error deleting data",message:e}))},F=function(e){return Object(j.error)(Object(l.a)({},N,{title:"API Error",message:e}))},D=n(371),P=n.n(D),R=function(e,t){return{type:"API_INTERACTION_START",payload:{id:e,message:t}}},U=function(e){return{type:"API_INTERACTION_END",payload:{id:e}}};function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";if(!Array.isArray(e))return e;var n={},a=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value;n[c[t]]=c}}catch(u){r=!0,i=u}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}function L(e){return function(t){return{type:e,payload:t}}}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={},a={},r=!0,i=!1,s=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value;Object.hasOwnProperty.call(e,u)&&(a[u]=e[u])}}catch(d){i=!0,s=d}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}for(var l in e)Object.hasOwnProperty.call(a,l)||(n[l]=e[l]);return[n,a]}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(a){if(null==a[e])return a;var r=B(a,[e]),i=Object(f.a)(r,2),s=i[0],o=i[1];return s[t]=n?o[e].map(function(e){return e.id}):o[e].id,s}}var Z=[];function G(e){e instanceof Function||(e=function(){return e}),Z.push(e)}function M(e){var t=e.dispatcher,n=e.propTypes,a=e.name,r=e.description,i=e.onErrorDispatch;return function(){for(var e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return function(e){var o,c,u,l;return O.a.async(function(d){for(;;)switch(d.prev=d.next){case 0:if(c=function(e,t){C.a.checkPropTypes(e,t||{},"api action argument",a,function(){o=!0})},o=!1,Array.isArray(n))if(n.length!==s.length)o=!0;else for(u=0;u<n.length;u++)c(n[u],s[u]);else n&&c(n,s[0]);if(!o){d.next=6;break}return e(F("Invalid arguments to ".concat(a,' while attempting action "').concat(r,'"'))),d.abrupt("return");case 6:return l=P()(),e(R(l,r)),d.prev=8,d.next=11,O.a.awrap(e(t.apply(void 0,s)));case 11:d.next=20;break;case 13:if(d.prev=13,d.t0=d.catch(8),!i){d.next=19;break}i instanceof Function?e(i(d.t0)):e(F('Error encountered during "'.concat(r,'"'))),d.next=20;break;case 19:throw d.t0;case 20:return d.prev=20,e(U(l)),d.finish(20);case 23:case"end":return d.stop()}},null,null,[[8,13,20,23]])}}}var W=n(12),J=n(16),K=n(13),V=n(122),z=n(15),Y=n(386),$="/api/v1",Q={credentials:"same-origin",headers:{"Content-Type":"application/json"}},X=function(e){function t(e){var n;Object(W.a)(this,t);var a=e.message;return n=Object(J.a)(this,Object(K.a)(t).call(this,a)),Error.captureStackTrace&&Error.captureStackTrace(Object(V.a)(n),ee),n.response=e,n.status=e.status,n}return Object(z.a)(t,e),t}(Object(Y.a)(Error)),ee=function(e){function t(e,n){var a;Object(W.a)(this,t);var r="Got status ".concat(e.status," ").concat(e.statusText," when fetching ").concat($+n);return a=Object(J.a)(this,Object(K.a)(t).call(this,{message:r})),Error.captureStackTrace&&Error.captureStackTrace(Object(V.a)(a),t),a.response=e,a.status=e.status,a}return Object(z.a)(t,e),t}(X);function te(e){return e.startsWith("/")?e:"/"+e}function ne(e,t){var n;return O.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(200!==e.status){a.next=7;break}return a.next=3,O.a.awrap(e.json());case 3:if("success"===(n=a.sent).status){a.next=6;break}throw new X(Object(l.a)({message:"Server response did not have `status === 'success`"},n));case 6:return a.abrupt("return",n.payload);case 7:throw new ee(e,t);case 8:case"end":return a.stop()}})}function ae(e){var t;return O.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return e=te(e),n.next=3,O.a.awrap(fetch($+e,Object(l.a)({},Q,{method:"GET"})));case 3:return t=n.sent,n.next=6,O.a.awrap(ne(t,e));case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}})}function re(e){var t,n,a=arguments;return O.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},e=te(e),r.next=4,O.a.awrap(fetch($+e,Object(l.a)({},Q,{method:"POST",body:JSON.stringify(t)})));case 4:return n=r.sent,r.next=7,O.a.awrap(ne(n,e));case 7:return r.abrupt("return",r.sent);case 8:case"end":return r.stop()}})}var ie=n(11),se=n(40),oe=n(100);function ce(e,t){var n=!1,a=e.map(function(e){return e.id===t.id?(n=1,t):e});return n||a.push(t),a}function ue(e,t,n,a){var r;return r={},Object(ie.a)(r,e,function(e,t){return Object(l.a)({},e,{_modelData:t.payload})}),Object(ie.a)(r,t,function(e,t){return Object(l.a)({},e,{_modelData:ce(e._modelData,t.payload)})}),Object(ie.a)(r,n,function(e,t){return Object(l.a)({},e,{_modelData:ce(e._modelData,t.payload)})}),Object(ie.a)(r,a,function(e,t){var n=t.payload;return Object(l.a)({},e,{_modelData:e._modelData.filter(function(e){return e.id!==n.id})})}),r}function le(e,t){var n=[];var a={id:Math.random(),path:n,pushToPath:function(e){n.unshift(e)}};e._storePath=a;var r=Object(oe.createReducer)(e,t);return r._storePath=a,r._localStoreSelector=function(e){return function(t){return function(e,t){if(e._storePath&&e._storePath.id===t.id)return e;try{var n=e,a=!0,r=!1,i=void 0;try{for(var s,o=t.path[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value;n=n[c]}}catch(u){r=!0,i=u}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}catch(l){console.error("Searching",e,"for local state with path",t.join("."),"but encountered an error")}return e}(t,e)}}(a),r}function de(e){var t=[];for(var n=0,a=Object.entries(e);n<a.length;n++){var r=a[n],i=Object(f.a)(r,2),s=i[0],o=i[1];o._storePath&&(o._storePath.pushToPath(s),t.push(o._storePath.pushToPath))}var c=Object(se.combineReducers)(e);return c._storePath={pushToPath:function(e){var n=!0,a=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0)(0,i.value)(e)}catch(o){a=!0,r=o}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}}},c}var pe,me=ue("FETCH_SESSIONS_SUCCESS","FETCH_ONE_SESSION_SUCCESS","UPSERT_ONE_SESSION_SUCCESS","DELETE_ONE_SESSION_SUCCESS"),fe=le({_modelData:[],activeSession:null},Object(l.a)({},me,Object(ie.a)({},"SET_ACTIVE_SESSION",function(e,t){return Object(l.a)({},e,{activeSession:t.payload})}))),he=le({users:[],active_user:{},active_role:"admin"},(pe={},Object(ie.a)(pe,"FETCH_ACTIVE_USER_SUCCESS",function(e,t){return Object(l.a)({},e,{active_user:t.payload})}),Object(ie.a)(pe,"FETCH_USERS_SUCCESS",function(e,t){return Object(l.a)({},e,{users:t.payload})}),Object(ie.a)(pe,"SET_ACTIVE_USER_ROLE_SUCCESS",function(e,t){return Object(l.a)({},e,{active_role:t.payload})}),pe)),_e=L("FETCH_ACTIVE_USER_SUCCESS"),ve=L("FETCH_USERS_SUCCESS"),ge=L("UPSERT_USERS_SUCCESS"),Ee=L("SET_ACTIVE_USER_ROLE_SUCCESS"),Se=M({name:"fetchActiveUser",description:"Fetch the active user",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(){return function(e,t){var n,a;return O.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=we(t()),r.next=3,O.a.awrap(ae("/".concat(n,"/active_user")));case 3:a=r.sent,e(_e(a));case 5:case"end":return r.stop()}})}}}),be=(M({name:"upsertUsers",description:"Upserts a user (setting their role(s))",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t){var n;return O.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.a.awrap(re("/admin/users",e));case 2:return n=a.sent,t(ge(n)),a.next=6,O.a.awrap(t(be(e)));case 6:case"end":return a.stop()}})}}}),M({name:"fetchUsers",description:"Fetch all users",propTypes:{},onErrorDispatch:function(e){return x(e.toString())},dispatcher:function(){return function(e,t){var n,a;return O.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=we(t()),r.next=3,O.a.awrap(ae("/".concat(n,"/users")));case 3:a=r.sent,e(ve(a));case 5:case"end":return r.stop()}})}}})),ye=M({name:"setActiveUserRole",description:"Sets the role of the active user",onErrorDispatch:function(e){return I(e.toString())},dispatcher:function(e){return function(t){return O.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:t(Ee(e));case 1:case"end":return n.stop()}})}}}),Oe=he._localStoreSelector,we=function(e){return Oe(e).active_role},Ce=L("FETCH_SESSIONS_SUCCESS"),Te=L("FETCH_ONE_SESSION_SUCCESS"),je=L("UPSERT_ONE_SESSION_SUCCESS"),Ae=(L("DELETE_ONE_SESSION_SUCCESS"),L("SET_ACTIVE_SESSION")),Ne=M({name:"fetchSessions",description:"Fetch sessions",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(){return function(e,t){var n,a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return n=we(t()),s.next=3,O.a.awrap(ae("/".concat(n,"/sessions")));case 3:return a=s.sent,s.next=6,O.a.awrap(e(Ce(a)));case 6:(r=De(t()))&&(i=a.filter(function(e){return e.id===r.id})[0])&&JSON.stringify(i)!==JSON.stringify(r)&&e(xe(i,!0));case 8:case"end":return s.stop()}})}}}),ke=(M({name:"fetchSession",description:"Fetch session",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(ae("/".concat(a,"/sessions/").concat(e.id)));case 3:r=i.sent,t(Te(r));case 5:case"end":return i.stop()}})}}}),M({name:"upsertSession",description:"Add/insert session",propTypes:{},onErrorDispatch:function(e){return x(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/sessions"),e));case 3:r=i.sent,t(je(r));case 5:case"end":return i.stop()}})}}})),xe=M({name:"setActiveSession",description:"Set the active session",propTypes:{id:C.a.any.isRequired},onErrorDispatch:!0,dispatcher:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a){var r,i,s,o,c,u,l,d;return O.a.async(function(p){for(;;)switch(p.prev=p.next){case 0:if(r=a(),t||(De(r)||{id:null}).id!==e.id){p.next=3;break}return p.abrupt("return");case 3:return p.next=5,O.a.awrap(n(Ae(e)));case 5:for(i=[],s=!0,o=!1,c=void 0,p.prev=9,u=Z[Symbol.iterator]();!(s=(l=u.next()).done);s=!0)d=l.value,i.push(n(d()));p.next=17;break;case 13:p.prev=13,p.t0=p.catch(9),o=!0,c=p.t0;case 17:p.prev=17,p.prev=18,s||null==u.return||u.return();case 20:if(p.prev=20,!o){p.next=23;break}throw c;case 23:return p.finish(20);case 24:return p.finish(17);case 25:return p.next=27,O.a.awrap(Promise.all(i));case 27:case"end":return p.stop()}},null,null,[[9,13,17,25],[18,,20,24]])}}}),Ie=fe._localStoreSelector,Fe=Object(T.a)(Ie,function(e){return e._modelData}),De=Object(T.a)(Ie,function(e){return e.activeSession}),Pe=n(29),Re=ue("FETCH_POSITIONS_SUCCESS","FETCH_ONE_POSITION_SUCCESS","UPSERT_ONE_POSITION_SUCCESS","DELETE_ONE_POSITION_SUCCESS"),Ue=le({_modelData:[]},Object(l.a)({},Re,Object(ie.a)({},"ADD_INSTRUCTOR_TO_POSITION_SUCCESS",function(e,t){var n=t.payload.position.id,a=t.payload.instructors;return Object(l.a)({},e,{_modelData:e._modelData.map(function(e){return e.id!==n?e:Object(l.a)({},e,{instructors:a})})})}))),He=le({_modelData:[]},ue("FETCH_INSTRUCTORS_SUCCESS","FETCH_ONE_INSTRUCTOR_SUCCESS","UPSERT_ONE_INSTRUCTOR_SUCCESS","DELETE_ONE_INSTRUCTOR_SUCCESS")),Le=L("FETCH_INSTRUCTORS_SUCCESS"),Be=L("FETCH_ONE_INSTRUCTOR_SUCCESS"),qe=L("UPSERT_ONE_INSTRUCTOR_SUCCESS"),Ze=L("DELETE_ONE_INSTRUCTOR_SUCCESS"),Ge=M({name:"fetchInstructors",description:"Fetch instructors",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(){return function(e,t){var n,a;return O.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=we(t()),r.next=3,O.a.awrap(ae("/".concat(n,"/instructors")));case 3:a=r.sent,e(Le(a));case 5:case"end":return r.stop()}})}}}),Me=(M({name:"fetchInstructor",description:"Fetch instructor",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(ae("/".concat(a,"/instructors/").concat(e.id)));case 3:r=i.sent,t(Be(r));case 5:case"end":return i.stop()}})}}}),M({name:"upsertInstructor",description:"Add/insert instructor",propTypes:{},onErrorDispatch:function(e){return x(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/instructors"),e));case 3:r=i.sent,t(qe(r));case 5:case"end":return i.stop()}})}}})),We=(M({name:"deleteInstructor",description:"Delete instructor",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return I(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/instructors/delete"),e));case 3:r=i.sent,t(Ze(r));case 5:case"end":return i.stop()}})}}}),He._localStoreSelector),Je=Object(T.a)(We,function(e){return e._modelData});G(Ge);var Ke=ue("FETCH_CONTRACT_TEMPLATES_SUCCESS","FETCH_ONE_CONTRACT_TEMPLATE_SUCCESS","UPSERT_ONE_CONTRACT_TEMPLATE_SUCCESS","DELETE_ONE_CONTRACT_TEMPLATE_SUCCESS"),Ve=le({_modelData:[],all:[]},Object(l.a)({},Ke,Object(ie.a)({},"FETCH_ALL_CONTRACT_TEMPLATES_SUCCESS",function(e,t){return Object(l.a)({},e,{all:t.payload})}))),ze=L("FETCH_CONTRACT_TEMPLATES_SUCCESS"),Ye=L("FETCH_ALL_CONTRACT_TEMPLATES_SUCCESS"),$e=L("UPSERT_ONE_CONTRACT_TEMPLATE_SUCCESS"),Qe=L("DELETE_ONE_CONTRACT_TEMPLATE_SUCCESS"),Xe=M({name:"fetchContractTemplates",description:"Fetch contract_templates",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(){return function(e,t){var n,a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=we(t()),a=t().model.sessions.activeSession.id,i.next=4,O.a.awrap(ae("/".concat(n,"/sessions/").concat(a,"/contract_templates")));case 4:r=i.sent,e(ze(r));case 6:case"end":return i.stop()}})}}}),et=M({name:"upsertContractTemplate",description:"Add/insert contract_template",propTypes:{},onErrorDispatch:function(e){return x(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=we(n()),r=n().model.sessions.activeSession.id,s.next=4,O.a.awrap(re("/".concat(a,"/sessions/").concat(r,"/contract_templates"),e));case 4:i=s.sent,t($e(i));case 6:case"end":return s.stop()}})}}}),tt=(M({name:"deleteContractTemplate",description:"Delete contract_template from a session",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return I(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=we(n()),r=n().model.sessions.activeSession.id,s.next=4,O.a.awrap(re("/".concat(a,"/sessions/").concat(r,"/contract_templates/delete"),e));case 4:i=s.sent,t(Qe(i));case 6:case"end":return s.stop()}})}}}),M({name:"fetchAllContractTemplates",description:"Fetch all available contract_templates",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(){return function(e,t){var n,a;return O.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=we(t()),r.next=3,O.a.awrap(ae("/".concat(n,"/available_contract_templates")));case 3:a=r.sent,e(Ye(a));case 5:case"end":return r.stop()}})}}})),nt=Ve._localStoreSelector,at=Object(T.a)(nt,function(e){return e._modelData}),rt=Object(T.a)(nt,function(e){return e.all});G(Xe);var it=ue("FETCH_APPLICANTS_SUCCESS","FETCH_ONE_APPLICANT_SUCCESS","UPSERT_ONE_APPLICANT_SUCCESS","DELETE_ONE_APPLICANT_SUCCESS");function st(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var s,o=function(){var e=s.value;t.some(function(t){return t.id===e.id})||n.push(e)},c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0)o()}catch(u){r=!0,i=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return n.length>0?e.concat(n):e}var ot=le({_modelData:[]},Object(l.a)({},it,Object(ie.a)({},"ADD_APPLICANT_TO_SESSION_SUCCESS",function(e,t){return Object(l.a)({},e,{_modelData:st(e._modelData,t.payload)})}))),ct=L("FETCH_APPLICANTS_SUCCESS"),ut=L("FETCH_ONE_APPLICANT_SUCCESS"),lt=L("UPSERT_ONE_APPLICANT_SUCCESS"),dt=L("DELETE_ONE_APPLICANT_SUCCESS"),pt=M({name:"fetchApplicants",description:"Fetch applicants",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(){return function(e,t){var n,a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=we(t()),a=t().model.sessions.activeSession.id,i.next=4,O.a.awrap(ae("/".concat(n,"/sessions/").concat(a,"/applicants")));case 4:r=i.sent,e(ct(r));case 6:case"end":return i.stop()}})}}}),mt=(M({name:"fetchApplicant",description:"Fetch applicant",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(ae("/".concat(a,"/applicants/").concat(e.id)));case 3:r=i.sent,t(ut(r));case 5:case"end":return i.stop()}})}}}),M({name:"upsertApplicant",description:"Add/insert applicant",propTypes:{},onErrorDispatch:function(e){return x(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/applicants"),e));case 3:r=i.sent,t(lt(r));case 5:case"end":return i.stop()}})}}})),ft=(M({name:"deleteApplicant",description:"Delete applicant",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return I(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=we(n()),r=n().model.sessions.activeSession.id,s.next=4,O.a.awrap(re("/".concat(a,"/sessions/").concat(r,"/applicants/delete"),e));case 4:i=s.sent,t(dt(i));case 6:case"end":return s.stop()}})}}}),ot._localStoreSelector),ht=Object(T.a)(ft,function(e){return e._modelData});G(pt);var _t=L("FETCH_POSITIONS_SUCCESS"),vt=L("FETCH_ONE_POSITION_SUCCESS"),gt=L("UPSERT_ONE_POSITION_SUCCESS"),Et=L("DELETE_ONE_POSITION_SUCCESS"),St=M({name:"fetchPositions",description:"Fetch positions",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(){return function(e,t){var n,a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=t().model.sessions.activeSession.id,a=we(t()),i.next=4,O.a.awrap(ae("/".concat(a,"/sessions/").concat(n,"/positions")));case 4:r=i.sent,e(_t(r));case 6:case"end":return i.stop()}})}}}),bt=(M({name:"fetchPosition",description:"Fetch position",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=n().model.sessions.activeSession.id,r=we(n()),s.next=4,O.a.awrap(ae("/".concat(r,"/sessions/").concat(a,"/positions/").concat(e.id)));case 4:i=s.sent,t(vt(i));case 6:case"end":return s.stop()}})}}}),q("instructors","instructor_ids",!0)),yt=q("contract_template","contract_template_id"),Ot=q("instructor","instructor_id"),wt=q("applicant","applicant_id");function Ct(e){var t=B(e,["instructor_preferences"]),n=Object(f.a)(t,2),a=n[0],r=n[1];return r.instructor_preferences&&(a.instructor_preferences=r.instructor_preferences.map(function(e){return wt(Ot(e))})),yt(bt(a))}var Tt,jt=M({name:"upsertPosition",description:"Add/insert position",propTypes:{},onErrorDispatch:function(e){return x(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=n().model.sessions.activeSession.id,r=we(n()),s.next=4,O.a.awrap(re("/".concat(r,"/sessions/").concat(a,"/positions"),Ct(e)));case 4:i=s.sent,t(gt(i));case 6:case"end":return s.stop()}})}}}),At=(M({name:"deletePosition",description:"Delete position",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return I(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=n().model.sessions.activeSession.id,r=we(n()),s.next=4,O.a.awrap(re("/".concat(r,"/sessions/").concat(a,"/positions/delete"),Ct(e)));case 4:i=s.sent,t(Et(i));case 6:case"end":return s.stop()}})}}}),Ue._localStoreSelector),Nt=Object(T.a)(At,function(e){return e._modelData}),kt=Object(T.a)([Nt,Je,at,ht],function(e,t,n,a){var r=H(t),i=H(n),s=H(a);return e.map(function(e){var t=e.instructor_ids,n=e.contract_template_id,a=e.instructor_preferences,o=Object(Pe.a)(e,["instructor_ids","contract_template_id","instructor_preferences"]);return Object(l.a)({},o,{instructors:t.map(function(e){return r[e]}),contract_template:i[n],instructor_preferences:(a||[]).map(function(e){var t=e.applicant_id,n=e.instructor_id,a=Object(Pe.a)(e,["applicant_id","instructor_id"]);return Object(l.a)({instructor:r[n],applicant:s[t]},a)})})})});G(St);var xt=ue("FETCH_ASSIGNMENTS_SUCCESS","FETCH_ONE_ASSIGNMENT_SUCCESS","UPSERT_ONE_ASSIGNMENT_SUCCESS","DELETE_ONE_ASSIGNMENT_SUCCESS");function It(e,t){var n=(t.payload[0]||{}).assignment_id;return n?Object(l.a)({},e,{_wageChunksByAssignmentId:Object(l.a)({},e._wageChunksByAssignmentId,Object(ie.a)({},n,t.payload))}):e}var Ft=le({_modelData:[],_wageChunksByAssignmentId:{}},Object(l.a)({},xt,(Tt={},Object(ie.a)(Tt,"FETCH_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS",It),Object(ie.a)(Tt,"UPSERT_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS",It),Tt))),Dt=L("FETCH_ASSIGNMENTS_SUCCESS"),Pt=L("FETCH_ONE_ASSIGNMENT_SUCCESS"),Rt=L("UPSERT_ONE_ASSIGNMENT_SUCCESS"),Ut=L("DELETE_ONE_ASSIGNMENT_SUCCESS"),Ht=M({name:"fetchAssignments",description:"Fetch assignments",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(){return function(e,t){var n,a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=we(t()),a=t().model.sessions.activeSession.id,i.next=4,O.a.awrap(ae("/".concat(n,"/sessions/").concat(a,"/assignments")));case 4:r=i.sent,e(Dt(r));case 6:case"end":return i.stop()}})}}}),Lt=M({name:"fetchAssignment",description:"Fetch assignment",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(ae("/".concat(a,"/assignments/").concat(e.id)));case 3:r=i.sent,t(Pt(r));case 5:case"end":return i.stop()}})}}}),Bt=q("applicant","applicant_id"),qt=q("position","position_id");function Zt(e){return qt(Bt(e))}var Gt=M({name:"upsertAssignment",description:"Add/insert assignment",propTypes:{},onErrorDispatch:function(e){return x(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/assignments"),Zt(e)));case 3:r=i.sent,t(Rt(r));case 5:case"end":return i.stop()}})}}}),Mt=(M({name:"deleteAssignment",description:"Delete assignment",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return I(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/assignments/delete"),Zt(e)));case 3:r=i.sent,t(Ut(r));case 5:case"end":return i.stop()}})}}}),Ft._localStoreSelector),Wt=Object(T.a)(Mt,function(e){return e._modelData}),Jt=Object(T.a)([Wt,ht,kt],function(e,t,n){return 0===e.length?[]:(t=H(t),n=H(n),e.map(function(e){var a=e.position_id,r=e.applicant_id,i=Object(Pe.a)(e,["position_id","applicant_id"]);return Object(l.a)({},i,{position:n[a]||{},applicant:t[r]||{}})}))});G(Ht);var Kt=le({_modelData:[]},ue("FETCH_APPLICATIONS_SUCCESS","FETCH_ONE_APPLICATION_SUCCESS","UPSERT_ONE_APPLICATION_SUCCESS","DELETE_ONE_APPLICATION_SUCCESS")),Vt=L("FETCH_APPLICATIONS_SUCCESS"),zt=L("FETCH_ONE_APPLICATION_SUCCESS"),Yt=L("UPSERT_ONE_APPLICATION_SUCCESS"),$t=L("DELETE_ONE_APPLICATION_SUCCESS"),Qt=q("applicant","applicant_id"),Xt=q("position","position_id");function en(e){var t=B(e,["position_preferences"]),n=Object(f.a)(t,2),a=n[0],r=n[1];return r.position_preferences&&(a.position_preferences=r.position_preferences.map(function(e){return Xt(e)})),Qt(a)}var tn=M({name:"fetchApplications",description:"Fetch applications",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(){return function(e,t){var n,a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return n=we(t()),a=t().model.sessions.activeSession.id,i.next=4,O.a.awrap(ae("/".concat(n,"/sessions/").concat(a,"/applications")));case 4:r=i.sent,e(Vt(r));case 6:case"end":return i.stop()}})}}}),nn=(M({name:"fetchApplication",description:"Fetch application",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=we(n()),r=n().model.sessions.activeSession.id,s.next=4,O.a.awrap(ae("/".concat(a,"/sessions/").concat(r,"/applications/").concat(e.id)));case 4:i=s.sent,t(zt(i));case 6:case"end":return s.stop()}})}}}),M({name:"upsertApplication",description:"Add/insert application",propTypes:{},onErrorDispatch:function(e){return x(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=we(n()),r=n().model.sessions.activeSession.id,s.next=4,O.a.awrap(re("/".concat(a,"/sessions/").concat(r,"/applications"),en(e)));case 4:i=s.sent,t(Yt(i));case 6:case"end":return s.stop()}})}}}),M({name:"deleteApplication",description:"Delete application",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return I(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=we(n()),r=n().model.sessions.activeSession.id,s.next=4,O.a.awrap(re("/".concat(a,"/sessions/").concat(r,"/applications/delete"),en(e)));case 4:i=s.sent,t($t(i));case 6:case"end":return s.stop()}})}}}),Kt._localStoreSelector),an=Object(T.a)(nn,function(e){return e._modelData});Object(T.a)([an,ht,kt],function(e,t,n){if(0===e.length)return[];var a=H(t),r=H(n);return e.map(function(e){var t=e.position_preferences,n=e.applicant_id,i=Object(Pe.a)(e,["position_preferences","applicant_id"]);return Object(l.a)({},i,{applicant:a[n]||{},position_preferences:(t||[]).map(function(e){var t=e.position_id,n=Object(Pe.a)(e,["position_id"]);return Object(l.a)({position:r[t]},n)})})})});G(tn);var rn=L("FETCH_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS"),sn=L("UPSERT_WAGE_CHUNKS_FOR_ASSIGNMENT_SUCCESS"),on=L("UPSERT_ONE_WAGE_CHUNK_SUCCESS"),cn=L("DELETE_ONE_WAGE_CHUNK_SUCCESS"),un=M({name:"fetchWageChunksForAssignment",description:"Fetch wage chunks associated with an assignment",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r,i;return O.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:return a=we(n()),r=e.id,s.next=4,O.a.awrap(ae("/".concat(a,"/assignments/").concat(r,"/wage_chunks")));case 4:i=s.sent,t(rn(i));case 6:case"end":return s.stop()}})}}}),ln=M({name:"upsertWageChunksForAssignment",description:"Fetch wage chunks associated with an assignment",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e,t){return function(n,a){var r,i,s;return O.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:return r=we(a()),i=e.id,o.next=4,O.a.awrap(re("/".concat(r,"/assignments/").concat(i,"/wage_chunks"),t));case 4:return s=o.sent,n(sn(s)),o.next=8,O.a.awrap(n(Lt(e)));case 8:case"end":return o.stop()}})}}}),dn=(M({name:"upsertWageChunk",description:"Add/insert wage chunk",propTypes:{},onErrorDispatch:function(e){return x(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/wage_chunks"),e));case 3:r=i.sent,t(on(r));case 5:case"end":return i.stop()}})}}}),M({name:"deleteWageChunk",description:"Delete a wage chunk",propTypes:{id:C.a.any.isRequired},onErrorDispatch:function(e){return I(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/wage_chunks/delete"),e));case 3:r=i.sent,t(cn(r));case 5:case"end":return i.stop()}})}}}),Ft._localStoreSelector),pn=Object(T.a)(dn,function(e){return function(t){var n=t.id;return e._wageChunksByAssignmentId[n]?e._wageChunksByAssignmentId[n]:[]}}),mn=L("FETCH_ONE_OFFER_SUCCESS"),fn=L("SET_OFFER_ACCEPTED_SUCCESS"),hn=L("SET_OFFER_REJECTED_SUCCESS"),_n=L("OFFER_CREATE_SUCCESS"),vn=L("OFFER_EMAIL_SUCCESS"),gn=L("OFFER_NAG_SUCCESS"),En=L("OFFER_WITHDRAW_SUCCESS"),Sn=(M({name:"fetchActiveOfferForAssignment",description:"Fetch an offer associated with an assignment",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(ae("/".concat(a,"/assignments/").concat(e.id,"/active_offer")));case 3:r=i.sent,t(mn(r));case 5:case"end":return i.stop()}})}}}),M({name:"setOfferForAssignmentAccepted",description:"Set an offer as accepted",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/assignments/").concat(e.id,"/active_offer/accept")));case 3:return r=i.sent,t(fn(r)),i.next=7,O.a.awrap(t(Lt(e)));case 7:case"end":return i.stop()}})}}})),bn=M({name:"setOfferForAssignmentRejected",description:"Set an offer as rejected",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/assignments/").concat(e.id,"/active_offer/reject")));case 3:return r=i.sent,t(hn(r)),i.next=7,O.a.awrap(t(Lt(e)));case 7:case"end":return i.stop()}})}}}),yn=M({name:"offerForAssignmentWithdraw",description:"Withdraw an offer",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/assignments/").concat(e.id,"/active_offer/withdraw")));case 3:return r=i.sent,t(En(r)),i.next=7,O.a.awrap(t(Lt(e)));case 7:case"end":return i.stop()}})}}}),On=M({name:"offerForAssignmentCreate",description:"Create an offer",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/assignments/").concat(e.id,"/active_offer/create")));case 3:return r=i.sent,t(_n(r)),i.next=7,O.a.awrap(t(Lt(e)));case 7:case"end":return i.stop()}})}}}),wn=M({name:"offerForAssignmentEmail",description:"Email an offer",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/assignments/").concat(e.id,"/active_offer/email")));case 3:return r=i.sent,t(vn(r)),i.next=7,O.a.awrap(t(Lt(e)));case 7:case"end":return i.stop()}})}}}),Cn=M({name:"offerForAssignmentNag",description:"Send a nag email for an offer",onErrorDispatch:function(e){return k(e.toString())},dispatcher:function(e){return function(t,n){var a,r;return O.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return a=we(n()),i.next=3,O.a.awrap(re("/".concat(a,"/assignments/").concat(e.id,"/active_offer/nag")));case 3:return r=i.sent,t(gn(r)),i.next=7,O.a.awrap(t(Lt(e)));case 7:case"end":return i.stop()}})}}}),Tn=n(372),jn=n.n(Tn),An=(n(820),n(3)),Nn=n(241);function kn(e){return r.a.createElement(p.a.Link,{as:c.b,activeClassName:"bg-warning text-dark",to:e.to},e.children)}var xn={openapi:"3.0.0",info:{description:"TAPP is a program for TA management--for making TA assignments and distributing TA contracts.",title:"TAPP"},servers:[{url:"/api/v1/admin"},{url:"/api/v1/instructor"},{url:"/api/v1/ta"},{url:"/api/v1"}],paths:Object(l.a)({},Object(An.c)(Nn.mockAPI))},In=Object(o.connect)(null,{fetchSessions:Ne})(S);n(822);var Fn=n(14);function Dn(e){try{return JSON.parse(e)}catch(t){return e}}var Pn=Object(o.connect)(function(e){return{notifications:e.ui.notifications}})(A.a),Rn=function(e){return e.ui.offerTable},Un=n(896),Hn=n(375);function Ln(e,t){function n(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return function(r){var i=r.target.value||"",s=Object(l.a)({},e,Object(ie.a)({},n,a(i)));t(s)}}return function(t,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=function(e){return e},c=function(e){return e||""};switch(i){case"number":o=Number;break;case"date":o=function(e){return new Date(e).toISOString()},c=function(e){try{return new Date(e).toISOString().slice(0,10)}catch(t){return""}}}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Un.a.Label,null,t),r.a.createElement(Un.a.Control,Object.assign({type:i,value:c(e[a]),onChange:n(a,o)},s)))}}function Bn(e){var t=e.children;return r.a.createElement(Un.a.Row,{style:{alignItems:"baseline"}},r.a.Children.map(t,function(e,t){return r.a.createElement(Un.a.Group,{as:Hn.a,key:t},e)}))}function qn(e){var t=Ln(e.session,e.setSession);return r.a.createElement(Un.a,null,r.a.createElement(Bn,null,t("Session Name (e.g. 2019 Fall)","name"),t("Start Date","start_date","date"),t("End Date","end_date","date")),r.a.createElement(Bn,null,t("Rate 1 (pre-January rate)","rate1","number",{step:"0.01",min:0}),t("Rate 2 (post-January rate)","rate2","number",{step:"0.01",min:0})))}var Zn=function(e){function t(){return Object(W.a)(this,t),Object(J.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(Fn.a)(t,[{key:"render",value:function(){var e=this.props.applicants,t=r.a.createElement("div",null,"No Applicants...");return e.length>0&&(t=r.a.createElement("ul",null,e.map(function(e){return r.a.createElement("li",{key:e.id},e.first_name," ",e.last_name)}))),r.a.createElement("div",null,r.a.createElement("h3",null,"Available Applicants"),t)}}]),t}(r.a.Component),Gn=n(50),Mn=[{Header:"Template Name",accessor:"template_name"},{Header:"Template File",accessor:"template_file"}];function Wn(e){var t=e.contractTemplates,n=e.columns,a=void 0===n?Mn:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Contract Templates"),r.a.createElement(Gn.a,{data:t,columns:a,showPagination:!1,minRows:1}))}var Jn=[{Header:"Last Name",accessor:"last_name"},{Header:"First Name",accessor:"first_name"},{Header:"UTORid",accessor:"utorid"}];function Kn(e){var t=e.instructors,n=e.columns,a=void 0===n?Jn:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Instructors"),r.a.createElement(Gn.a,{data:t,columns:a,showPagination:!1,minRows:1}))}var Vn={utorid:"",last_name:"",first_name:""};function zn(e){var t=e.instructor,n=e.setInstructor,a=Object(l.a)({},Vn,{},t);function i(e){return function(t){var r=t.target.value||"",i=Object(l.a)({},a,Object(ie.a)({},e,r));n(i)}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text";return r.a.createElement(r.a.Fragment,null,r.a.createElement(Un.a.Label,null,e),r.a.createElement(Un.a.Control,{type:n,value:a[t]||"",onChange:i(t)}))}return r.a.createElement(Un.a,null,r.a.createElement(Un.a.Row,null,r.a.createElement(Un.a.Group,{as:Hn.a},s("First Name","first_name")),r.a.createElement(Un.a.Group,{as:Hn.a},s("Last Name","last_name")),r.a.createElement(Un.a.Group,{as:Hn.a},s("UTORid","utorid"))))}var Yn=n(385),$n=n(894);n(823);function Qn(e){var t=e.title,n=e.value,a=e.show,i=e.onHide,s=e.onChange,o=r.a.useState(n),c=Object(f.a)(o,2),u=c[0],l=c[1];function d(){l(n),i()}var p=u==n?null:r.a.createElement("span",null,"Change from"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},n)," to"," ",r.a.createElement("span",{className:"field-dialog-formatted-name"},u));return r.a.createElement($n.a,{show:a,onHide:d},r.a.createElement($n.a.Header,{closeButton:!0},r.a.createElement($n.a.Title,null,t)),r.a.createElement($n.a.Body,null,r.a.createElement("input",{type:"text",value:u,onChange:function(e){return l(e.currentTarget.value)}})," ",p),r.a.createElement($n.a.Footer,null,r.a.createElement(_.a,{onClick:d,variant:"outline-secondary"},"Cancel"),r.a.createElement(_.a,{onClick:function(){u!=n&&s(u,n),i()}},"Save")))}function Xn(e){var t=e.title,n=e.hidden,a=e.onClick;return n?null:r.a.createElement("div",{className:"show-on-hover edit-glyph",onClick:a,title:t},r.a.createElement(Yn.a,null))}function ea(e){var t=e.children,n=e.title,a=e.value,i=e.onChange,s=e.editable,o=void 0===s||s,c=r.a.useState(!1),u=Object(f.a)(c,2),l=u[0],d=u[1];return r.a.createElement("div",{className:"show-on-hover-wrapper"},t,r.a.createElement(Xn,{title:n,hidden:!o,onClick:function(){return d(!0)}}),r.a.createElement(Qn,{title:n,value:a,onChange:i,show:l,onHide:function(){return d(!1)}}))}function ta(e){var t="Edit ".concat(e.column.Header),n=e.upsertInstructor,a=e.field;return r.a.createElement(ea,{title:t,value:e.value||"",onChange:function(t){var r=e.original.id;n(Object(ie.a)({id:r},a,t))}},e.value)}var na=Object(o.connect)(function(e){return{instructors:Je(e)}},{upsertInstructor:Me})(function(e){var t=e.upsertInstructor,n=Object(Pe.a)(e,["upsertInstructor"]);function a(e){return function(n){return r.a.createElement(ta,Object.assign({field:e,upsertInstructor:t},n))}}var i=[{Header:"Last Name",accessor:"last_name",Cell:a("last_name")},{Header:"First Name",accessor:"first_name",Cell:a("first_name")},{Header:"Email",accessor:"email",Cell:a("email")},{Header:"UTORid",accessor:"utorid",Cell:a("utorid")}];return r.a.createElement(Kn,Object.assign({columns:i},n))}),aa=n(890);function ra(e){return null==e?"":(""+e).trim()}var ia={first_name:"",last_name:"",utorid:""};var sa=Object(o.connect)(function(e){return{instructors:Je(e)}},{upsertInstructor:Me})(function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.instructors,s=e.upsertInstructor,o=r.a.useState(ia),c=Object(f.a)(o,2),u=c[0],l=c[1];r.a.useEffect(function(){t||l(ia)},[t]);var d=function(e,t){var n={delayShow:"",immediateShow:""};ra(e.utorid)&&ra(e.first_name)&&ra(e.last_name)||(n.delayShow="A first name, last name, and utorid is required");var a=t.find(function(t){return ra(t.utorid)===ra(e.utorid)});return a&&(n.immediateShow=r.a.createElement("p",null,"Another instructor exists with utorid=",e.utorid,":"," ",r.a.createElement("b",null,a.first_name," ",a.last_name))),n}(u,i);return r.a.createElement($n.a,{show:t,onHide:a},r.a.createElement($n.a.Header,{closeButton:!0},r.a.createElement($n.a.Title,null,"Add Instructor")),r.a.createElement($n.a.Body,null,r.a.createElement(zn,{instructor:u,setInstructor:l}),d.immediateShow?r.a.createElement(aa.a,{variant:"danger"},d.immediateShow):null),r.a.createElement($n.a.Footer,null,r.a.createElement(_.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(_.a,{onClick:function(){s(u),a()},title:d.delayShow||"Create Instructor",disabled:!!d.delayShow||!!d.immediateShow},"Create Instructor")))});function oa(){var e=r.a.useState(!1),t=Object(f.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(_.a,{onClick:function(){a(!0)}},"Add Instructor"),r.a.createElement(sa,{show:n,onHide:function(){a(!1)}}),r.a.createElement(na,null))}var ca=n(891),ua=[{Header:"Position Code",accessor:"position_code"},{Header:"Position Title",accessor:"position_title"},{Header:"Hours",accessor:"hours_per_assignment"},{Header:"Start",accessor:"start_date"},{Header:"End",accessor:"end_date"},{Header:"Instructors",accessor:"instructors",Cell:function(e){return r.a.createElement(r.a.Fragment,null,e.value.map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(e.first_name," ").concat(e.last_name);return r.a.createElement(ca.a,{variant:"secondary",className:"mr-1",key:t},t)}))}},{Header:"Contract Template",accessor:"contract_template.template_name"}];function la(e){var t=e.positions,n=e.columns,a=void 0===n?ua:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Positions"),r.a.createElement(Gn.a,{data:t,columns:a,showPagination:!1,minRows:1}))}n(824);var da=function(e){function t(e){var n;return Object(W.a)(this,t),(n=Object(J.a)(this,Object(K.a)(t).call(this,e))).state={filters:"",data:n.props.data},n}return Object(z.a)(t,e),Object(Fn.a)(t,[{key:"filter",value:function(e){var t=e.target.value,n=this.props.data.filter(function(e){for(var n in e){var a=e[n]&&e[n].toString().toLowerCase();if(a&&-1!==a.indexOf(t.toLowerCase()))return!0}return!1});this.setState({filters:t,data:n})}},{key:"componentWillReceiveProps",value:function(e){e.data!==this.props.data&&this.setState({data:e.data})}},{key:"render",value:function(){var e=this.state.data,t=r.a.createElement("div",null,"No Applicants...");return e.length>0&&(t=r.a.createElement("ul",null,e.map(function(e){return r.a.createElement("li",{key:e.id},e.first_name," ",e.last_name)}))),r.a.createElement("div",{className:"search-box"},r.a.createElement("input",{className:"search",type:"text",name:"",value:this.state.filters,placeholder:"Search here",onChange:this.filter.bind(this)}),t)}}]),t}(r.a.Component),pa=n(892),ma=n(52);var fa=function(e,t){var n=e.files;if(n.length>0){var a=new FileReader,r=_a(n[0].name,t);a.readAsText(n[0]),a.onload=function(e){return r(e.target.result)}}e.value=""},ha=function(e,t){return{success:e,content:t}},_a=function(e,t){switch(va(e)){case".json":return function(e){try{t(ha(!0,JSON.parse(e)))}catch(n){t(ha(!1,n))}};default:return function(e){t(ha(!0,e))}}},va=function(e){var t=e.match(/\.\w+$/g);return t.length>0?t[0]:null};function ga(e){var t=e.uploadFunc,n=Object(a.useState)(null),i=Object(f.a)(n,2),s=i[0],o=(i[1],Object(a.useState)("")),c=Object(f.a)(o,2),u=c[0],l=(c[1],Object(a.useState)(!1)),d=Object(f.a)(l,2),p=d[0],m=d[1];function h(){m(!1)}return r.a.createElement("div",null,r.a.createElement(pa.a,{id:"dropdown-basic-button",title:"Import"},r.a.createElement("input",{id:"raised-button-file",type:"file",accept:"application/json",style:{display:"none"},onChange:function(e){fa(e.target,function(e){throw console.log(e),new Error("Not implemented!")})}}),r.a.createElement("label",{htmlFor:"raised-button-file"},r.a.createElement(ma.a.Item,null,"Import From File"))),r.a.createElement($n.a,{show:p,onHide:h},r.a.createElement($n.a.Header,{closeButton:!0},r.a.createElement($n.a.Title,null,"The following will be overwritten")),r.a.createElement($n.a.Body,null,r.a.createElement("p",null,u)),r.a.createElement($n.a.Footer,null,r.a.createElement(_.a,{variant:"secondary",onClick:h},"Cancel"),r.a.createElement(_.a,{variant:"primary",onClick:function(){return t(s)}},"Proceed"))))}var Ea=n(24),Sa=n(379),ba=n.n(Sa),ya=(n(825),ba()(Gn.a)),Oa=[{Header:"Last Name",accessor:"applicant.last_name"},{Header:"First Name",accessor:"applicant.first_name"},{Header:"Email",accessor:"applicant.email",width:250},{Header:"Student Number",accessor:"applicant.student_number",width:100},{Header:"Position",accessor:"position.position_code",width:130},{Header:"Hours",accessor:"hours",width:100},{Header:"Contract",accessor:"position.contract_template.template_name",width:100},{Header:"First Time?",accessor:"applicant.first_time_ta",Cell:function(e){return r.a.createElement("div",{style:{backgroundColor:"red"}},(""+e.value).toUpperCase())},width:100},{Header:"Status",accessor:"status",width:100},{Header:"Nag Count",accessor:"nag_count",width:100}];function wa(e){var t=e.data,n=e.selected,a=e.setSelected,i=e.columns,s=void 0===i?Oa:i,o=new Set(n),c=function(e){a(Object(Ea.a)(e))},u=r.a.useState(""),l=Object(f.a)(u,2),d=l[0],p=l[1],m=r.a.useState(null),h=Object(f.a)(m,2),_=h[0],v=h[1],g=r.a.useState(!1),E=Object(f.a)(g,2),S=E[0],b=E[1];var y=d?t.filter(function(e){return function(e){return Object.values(e).map(function(e){return"string"===typeof e?e:Object.values(e).join(" ")}).join(" ").toLowerCase()}(e).includes(d.toLowerCase())}):t,O=r.a.useRef(null);function w(){if(!O)return console.warn("Trying to get data displayed in a ReactTable, but no ref has been created"),[];try{return O.getWrappedInstance().getResolvedState().sortedData.map(function(e){return e._original})}catch(e){return[]}}r.a.useEffect(function(){var e=!1,t=w();t.length>0&&t.every(function(e){return o.has(e.id)})&&(e=!0),b(e)},[o,d]);var C=r.a.createElement(ya,{ref:function(e){return O=e},data:y,columns:s,toggleSelection:function e(t,n,a){if(n){if(n&&null==_)return e(t,!1,a);var r=w().map(function(e){return e.id}),i=r.indexOf(_);if(-1===i)return e(t,!1,a);var s=r.indexOf(a.id),u=[Math.min(i,s),Math.max(i,s)],l=u[0],d=u[1];c(new Set([].concat(Object(Ea.a)(o),Object(Ea.a)(r.filter(function(e,t){return t<=d&&t>=l})))))}else{var p=!o.has(a.id),m=new Set(o);!0===p?(m.add(a.id),c(m),v(a.id)):(m.delete(a.id),c(m),v(null))}},selectAll:S,toggleAll:function(){var e=w().map(function(e){return e.id});if(S){var t=new Set(o),n=!0,a=!1,r=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;t.delete(u)}}catch(l){a=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw r}}c(t)}else c(new Set([].concat(Object(Ea.a)(o),Object(Ea.a)(e))))},isSelected:function(e){return o.has(e)},selectType:"checkbox",keyField:"id",minRows:1,showPagination:!1});return null==n&&(C=r.a.createElement(Gn.a,{columns:s,data:y})),r.a.createElement("div",null,"Filter:"," ",r.a.createElement("input",{type:"text",onChange:function(e){return p(e.target.value)}}),C)}function Ca(e){var t="Edit ".concat(e.column.Header),n=e.upsertApplicant,a=e.field;return r.a.createElement(ea,{title:t,value:e.value||"",onChange:function(t){var r=e.original.applicant.id;n(Object(ie.a)({id:r},a,t))}},e.value)}function Ta(e){var t="Edit ".concat(e.column.Header),n=e.upsertAssignment,a=e.field,i=e.original.active_offer_status;return r.a.createElement(ea,{title:t,value:e.value||"",onChange:function(t){var r=e.original.id;n(Object(ie.a)({id:r},a,t))},editable:!i},e.value)}var ja=Object(o.connect)(function(e){return{data:Jt(e),selected:Rn(e).selectedAssignmentIds}},{upsertApplicant:mt,upsertAssignment:Gt,setSelected:function(e){return{type:"SET_SELECTED_ROWS",payload:e}}})(function(e){var t=e.upsertApplicant,n=e.upsertAssignment,a=Object(Pe.a)(e,["upsertApplicant","upsertAssignment"]);function i(e){return function(n){return r.a.createElement(Ca,Object.assign({field:e,upsertApplicant:t},n))}}var s,o=[{Header:"Last Name",accessor:"applicant.last_name",Cell:i("last_name")},{Header:"First Name",accessor:"applicant.first_name",Cell:i("first_name")},{Header:"Email",accessor:"applicant.email",Cell:i("email")},{Header:"Position",accessor:"position.position_code"},{Header:"Hours",accessor:"hours",Cell:(s="hours",function(e){return r.a.createElement(Ta,Object.assign({field:s,upsertAssignment:n},e))})},{Header:"Status",id:"status",accessor:function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.charAt(0).toUpperCase()+e.slice(1)}(e.active_offer_status||"")}}];return r.a.createElement(wa,Object.assign({columns:o},a))}),Aa=n(71),Na=(n(237),n(238),{position_code:"",position_title:"",hours_per_assignment:0,contract_template:{},duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",instructors:[]});function ka(e){var t=e.position,n=e.setPosition,a=e.instructors,i=void 0===a?[]:a,s=e.contractTemplates,o=void 0===s?[]:s,c=e.defaultContractTemplate,u=void 0===c?{}:c,d=Object(l.a)({},Na,{},t);var p=Ln(d,n);return r.a.createElement(Un.a,null,r.a.createElement(Bn,null,p("Course Code (e.g. MAT135H1F)","position_code"),p("Course Title","position_title")),r.a.createElement(Bn,null,p("Start Date","start_date","date"),p("End Date","end_date","date"),p("Hours per Assignment","hours_per_assignment","number")),r.a.createElement(Un.a.Group,null,r.a.createElement(Un.a.Label,null,"Instructors"),r.a.createElement(Aa.Typeahead,{id:"instructors-input",ignoreDiacritics:!0,multiple:!0,placeholder:"Instructors...",labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name)},selected:d.instructors,options:i,onChange:function(e){n(Object(l.a)({},d,{instructors:e}))}})),r.a.createElement(Un.a.Group,null,r.a.createElement(Un.a.Label,null,"Contract Template (which offer template will be used)"),r.a.createElement(Aa.Typeahead,{id:"instructors-input",ignoreDiacritics:!0,multiple:!0,placeholder:"Contract template...",labelKey:function(e){return"".concat(e.template_name)},selected:[d.contract_template],options:o,onChange:function(e){var t=e[e.length-1]||u;n(Object(l.a)({},d,{contract_template:t}))}})),r.a.createElement("h3",null,"Ad-related Info"),r.a.createElement(Bn,null,p("Duties","duties")),r.a.createElement(Bn,null,p("Qualifications","qualifications")),r.a.createElement("h3",null,"Admin Info"),r.a.createElement(Bn,null,p("Current Enrollment","current_enrollment","number"),p("Waitlisted","current_waitlisted","number"),p("Desired Number of Assignments","desired_num_assignments","number")))}var xa={note:"",position:{id:null},position_id:null,applicant:{id:null},applicant_id:null};function Ia(e){var t=e.assignment,n=e.setAssignment,a=e.applicants,i=e.positions,s=Object(l.a)({},xa,{},t);var o=Ln(s,n);return r.a.createElement(Un.a,null,r.a.createElement(Bn,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Un.a.Label,null,"Position"),r.a.createElement(Aa.Typeahead,{id:"position-input",ignoreDiacritics:!0,placeholder:"Position...",multiple:!0,labelKey:function(e){return"".concat(e.position_code," (").concat(e.position_title,")")},selected:null==s.position.id?[]:[s.position],options:i,onChange:function(e){var t=e[e.length-1]||{id:null};n(Object(l.a)({},s,{position:t,position_id:t.id,hours:t.hours_per_assignment,start_date:t.start_date,end_date:t.end_date}))}})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Un.a.Label,null,"Applicant"),r.a.createElement(Aa.Typeahead,{id:"applicant-input",ignoreDiacritics:!0,placeholder:"Applicant...",multiple:!0,labelKey:function(e){return"".concat(e.first_name," ").concat(e.last_name)},selected:null==s.applicant.id?[]:[s.applicant],options:a,onChange:function(e){var t=e[e.length-1]||{id:null};n(Object(l.a)({},s,{applicant:t,applicant_id:t.id}))}}))),r.a.createElement(Bn,null,o("Hours","hours","number")),r.a.createElement("h4",null,"Optional Settings"),r.a.createElement(Bn,null,o("Start Date","start_date","date"),o("End Date","end_date","date")))}var Fa={template_name:"",template_file:""};function Da(e){var t=e.contractTemplate,n=e.setContractTemplate,a=e.availableTemplates,i=void 0===a?[]:a,s=Object(l.a)({},Fa,{},t);var o=Ln(s,n);return r.a.createElement(Un.a,null,r.a.createElement(Bn,null,o('Template Name (e.g. "OTO" "Invigilate")',"template_name")),r.a.createElement(Bn,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Un.a.Label,{title:"This file is stored on the server; you can edit it there."},"Template File"),r.a.createElement(Aa.Typeahead,{id:"file-name-input",ignoreDiacritics:!0,placeholder:"File name...",multiple:!0,labelKey:function(e){return"".concat(e)},selected:s.template_file?[s.template_file]:[],options:i.map(function(e){return e.template_file}),onChange:function(e){var t=e[e.length-1]||"";n(Object(l.a)({},s,{template_file:t}))}}))))}var Pa=Object(o.connect)(function(e){return{applicants:ht(e)}})(Zn),Ra=Object(o.connect)(function(e){return{contractTemplates:at(e)}})(Wn),Ua=Object(o.connect)(function(e){return{positions:kt(e)}})(la),Ha=Object(o.connect)(function(e){return{assignments:Jt(e)}})(function(e){var t=e.assignments,n=r.a.createElement("div",null,"No assignments...");return t.length>0&&(n=r.a.createElement("ul",null,t.map(function(e){return r.a.createElement("li",{key:e.id},e.position.position_code," (",e.hours," ","hours): ",e.applicant.first_name," ",e.applicant.last_name)}))),r.a.createElement("div",null,r.a.createElement("h3",null,"Available Assignments"),n)}),La=Object(o.connect)(function(e){return{data:ht(e)}})(da),Ba=Object(o.connect)(function(e){return{data:Rn(e).selectedAssignmentIds}})(function(e){var t=e.data;return r.a.createElement(pa.a,{id:"dropdown-basic-button",title:"Email"},r.a.createElement(ma.a.Item,{onClick:function(){return function(){throw console.log("data read from redux: "+t),new Error("Email function not implemented!")}()}},"Email Blank"),r.a.createElement(ma.a.Item,{onClick:function(){return function(){throw new Error("Email contract not implemented!")}()}},"Email Contract"),r.a.createElement(ma.a.Item,{onClick:function(){return function(){throw new Error("Nag offer function not implemented!")}()}},"Nag Offers"))}),qa=Object(o.connect)(function(e){return{instructors:Je(e)}})(ka),Za=Object(o.connect)(function(e){return{positions:kt(e),applicants:ht(e)}})(Ia);function Ga(e){var t=e.children,n=e.title;return r.a.createElement("div",{style:{margin:5}},r.a.createElement("h5",null,"The"," ",r.a.createElement("span",{style:{color:"green",fontFamily:"mono"}},n)," ","Component"),r.a.createElement("div",{style:{border:"1px solid black",padding:5}},t))}var Ma=function(){var e=r.a.useState({position_id:0,applicant_id:0}),t=Object(f.a)(e,2),n=t[0],a=t[1],i=r.a.useState({position_code:""}),s=Object(f.a)(i,2),o=s[0],c=s[1],u=r.a.useState({last_name:"Baggins",first_name:"Bilbo",utorid:"bilbob"}),l=Object(f.a)(u,2),d=l[0],p=l[1],m=r.a.useState({name:""}),h=Object(f.a)(m,2),_=h[0],v=h[1],g=r.a.useState({}),E=Object(f.a)(g,2),S=E[0],b=E[1];return r.a.createElement("div",null,r.a.createElement(Ga,{title:"ContractTemplateEditor"},r.a.createElement(Da,{contractTemplate:S,setContractTemplate:b,availableTemplates:[{template_file:"/math/OTO.html"},{template_file:"/cs/invigilate.html"}]})),r.a.createElement(Ga,{title:"AssignmentEditor"},r.a.createElement(Za,{assignment:n,setAssignment:a})),r.a.createElement(Ga,{title:"SessionEditor"},r.a.createElement(qn,{session:_,setSession:v})),r.a.createElement(Ga,{title:"InstructorEditor"},r.a.createElement(zn,{instructor:d,setInstructor:p})),r.a.createElement(Ga,{title:"PositionEditor"},r.a.createElement(qa,{position:o,setPosition:c})),r.a.createElement(Ga,{title:"EditableField"},r.a.createElement(ea,{title:"Edit this super awesome content",value:45,onChange:console.log},"Edit me!")),r.a.createElement(Ga,{title:"ApplicantsList"},r.a.createElement(Pa,null)),r.a.createElement(Ga,{title:"PostitionTemplatesList"},r.a.createElement(Ra,null)),r.a.createElement(Ga,{title:"InstuctorsList"},r.a.createElement(na,null)),r.a.createElement(Ga,{title:"PositionsList"},r.a.createElement(Ua,null)),r.a.createElement(Ga,{title:"AssignmentsList"},r.a.createElement(Ha,null)),r.a.createElement(Ga,{title:"SearchBox"},r.a.createElement(La,null)),r.a.createElement(Ga,{title:"ImportButton"},r.a.createElement(ga,null)),r.a.createElement(Ga,{title:"EmailButton"},r.a.createElement(Ba,null)),r.a.createElement(Ga,{title:"OfferTable"},r.a.createElement(ja,null)))};var Wa=Object(o.connect)(function(e,t){return{positions:kt(e),listRenderer:t.listRenderer}})(function(e){var t=e.data,n=e.listRenderer,i=e.filterFunc,s=Object(Pe.a)(e,["data","listRenderer","filterFunc"]),o=n,c=Object(a.useState)(""),u=Object(f.a)(c,2),l=u[0],d=u[1],p=i(t,l);return r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:l,onChange:function(e){return d(e.target.value)}}),r.a.createElement(o,Object.assign({data:p},s)))});var Ja=function(){return r.a.createElement("div",null,r.a.createElement(Wa,{listRenderer:la,filterFunc:function(e,t){return e}}))};var Ka={name:"",start_date:"",end_date:"",rate1:"",rate2:""};var Va=Object(o.connect)(function(e){return{sessions:Fe(e)}},{upsertSession:ke})(function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.sessions,s=e.upsertSession,o=r.a.useState(Ka),c=Object(f.a)(o,2),u=c[0],l=c[1];r.a.useEffect(function(){t||l(Ka)},[t]);var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};return ra(e.name)&&ra(e.start_date)&&ra(e.end_date)||(n.delayShow="A first name, start date, and end date is required"),t.find(function(t){return ra(t.name)===ra(e.name)})&&(n.immediateShow=r.a.createElement("p",null,"Another session exists with name=",e.name)),n}(u,i);return r.a.createElement($n.a,{show:t,onHide:a},r.a.createElement($n.a.Header,{closeButton:!0},r.a.createElement($n.a.Title,null,"Add Session")),r.a.createElement($n.a.Body,null,r.a.createElement(qn,{session:u,setSession:l}),d.immediateShow?r.a.createElement(aa.a,{variant:"danger"},d.immediateShow):null),r.a.createElement($n.a.Footer,null,r.a.createElement(_.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(_.a,{onClick:function(){s(u),a()},title:d.delayShow||"Create Session",disabled:!!d.delayShow||!!d.immediateShow},"Create Session")))}),za=[{Header:"Name",accessor:"name"},{Header:"Start",accessor:"start_date"},{Header:"End",accessor:"end_date"},{Header:"Rate (Pre-January)",accessor:"rate1"},{Header:"Rate (Post-January)",accessor:"rate2"}];var Ya=Object(o.connect)(function(e){return{sessions:Fe(e)}})(function(e){var t=e.sessions,n=e.columns,a=void 0===n?za:n;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,"Sessions"),r.a.createElement(Gn.a,{data:t,columns:a,showPagination:!1,minRows:1}))});function $a(){var e=r.a.useState(!1),t=Object(f.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(_.a,{onClick:function(){a(!0)}},"Add Session"),r.a.createElement(Va,{show:n,onHide:function(){a(!1)}}),r.a.createElement(Ya,null))}var Qa={position_code:"",position_title:"",hours_per_assignment:0,contract_template_id:null,duties:"Some combination of marking, invigilating, tutorials, office hours, and the help centre.",instructors:[]};var Xa=Object(o.connect)(function(e){return{positions:kt(e),instructors:Je(e),contractTemplates:at(e)}},{upsertPosition:jt})(function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.positions,s=e.upsertPosition,o=e.instructors,c=e.contractTemplates,u=r.a.useState(Qa),l=Object(f.a)(u,2),d=l[0],p=l[1];r.a.useEffect(function(){t||p(Qa)},[t]),r.a.useEffect(function(){var e=c.find(function(e){return"standard"===e.template_name.toLowerCase()})||c.find(function(e){return"default"===e.template_name.toLowerCase()})||c.find(function(e){return e.template_name.toLowerCase().includes("standard")})||c.find(function(e){return e.template_name.toLowerCase().includes("default")})||c[0];e&&(Qa.contract_template=e,Qa.contract_template_id=e.id)},[c]);var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};return ra(e.position_code)&&ra(e.start_date)&&ra(e.end_date)||(n.delayShow="A position code, start date, and end date is required"),t.find(function(t){return ra(t.position_code)===ra(e.position_code)})&&(n.immediateShow=r.a.createElement("p",null,"Another position exists with name=",e.position_code)),n}(d,i);return r.a.createElement($n.a,{show:t,onHide:a},r.a.createElement($n.a.Header,{closeButton:!0},r.a.createElement($n.a.Title,null,"Add Position")),r.a.createElement($n.a.Body,null,r.a.createElement(ka,{position:d,setPosition:p,instructors:o,contractTemplates:c,defaultContractTemplate:Qa.contract_template}),m.immediateShow?r.a.createElement(aa.a,{variant:"danger"},m.immediateShow):null),r.a.createElement($n.a.Footer,null,r.a.createElement(_.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(_.a,{onClick:function(){s(d),a()},title:m.delayShow||"Create Position",disabled:!!m.delayShow||!!m.immediateShow},"Create Position")))}),er=Object(o.connect)(function(e){return{positions:kt(e)}})(la);function tr(){var e=r.a.useState(!1),t=Object(f.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(_.a,{onClick:function(){a(!0)}},"Add Position"),r.a.createElement(Xa,{show:n,onHide:function(){a(!1)}}),r.a.createElement(er,null))}var nr={position:{id:null},applicant:{id:null},position_id:-1,applicant_id:-1};var ar=Object(o.connect)(function(e){return{positions:kt(e),applicants:ht(e),assignments:Jt(e)}},{upsertAssignment:Gt})(function(e){var t=e.show,n=e.onHide,a=e.positions,i=e.applicants,s=e.assignments,o=e.upsertAssignment,c=r.a.useState(nr),u=Object(f.a)(c,2),l=u[0],d=u[1];r.a.useEffect(function(){t||d(nr)},[t]);var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={delayShow:"",immediateShow:""};return ra(e.position_id)&&ra(e.applicant_id)||(n.delayShow="A position and applicant is required"),t.find(function(t){return ra((t.position||{}).id)===ra((e.position||{}).id)&&ra((t.applicant||{}).id)===ra((e.applicant||{}).id)})&&(n.immediateShow=r.a.createElement("p",null,"Another assignment exists with"," ",r.a.createElement("b",null,"applicant=",e.applicant.first_name," ",e.applicant.last_name)," ","and ",r.a.createElement("b",null,"position=",e.position.position_code))),n}(l,s);return r.a.createElement($n.a,{show:t,onHide:n},r.a.createElement($n.a.Header,{closeButton:!0},r.a.createElement($n.a.Title,null,"Add Assignment")),r.a.createElement($n.a.Body,null,r.a.createElement(Ia,{positions:a,applicants:i,assignment:l,setAssignment:d}),p.immediateShow?r.a.createElement(aa.a,{variant:"danger"},p.immediateShow):null),r.a.createElement($n.a.Footer,null,r.a.createElement(_.a,{onClick:n,variant:"light"},"Cancel"),r.a.createElement(_.a,{onClick:function(){o(l),n()},title:p.delayShow||"Create Position",disabled:!!p.delayShow||!!p.immediateShow},"Create Assignment")))});var rr=Object(o.connect)(function(e){return{wageChunksByAssignment:pn(e)}},{fetchWageChunksForAssignment:un,upsertWageChunksForAssignment:ln})(function(e){var t=e.assignment,n=e.wageChunksByAssignment,a=e.fetchWageChunksForAssignment,i=e.upsertWageChunksForAssignment,s=r.a.useState([]),o=Object(f.a)(s,2),c=o[0],u=o[1];function d(e){return function(n){var a=c.map(function(t,a){return e!==a?t:Object(l.a)({},t,{hours:+n})});i(t,a)}}return r.a.useEffect(function(){a(t)},[t]),r.a.useEffect(function(){u(n(t))},[t,n,a]),r.a.createElement("div",null,r.a.createElement("h5",null,t.applicant.first_name," ",t.applicant.last_name),r.a.createElement("div",null,t.position.position_code," ",t.position.position_name),r.a.createElement("div",null,t.hours," hours"),"Wage Chunks:",r.a.createElement("ul",null,c.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(ea,{title:"Hours",value:e.hours,onChange:d(t)},e.hours)," ","hours at a rate of $",e.rate," from ",e.start_date," ","to ",e.end_date)})))});var ir=Object(o.connect)(function(e){var t=Rn(e).selectedAssignmentIds;return{assignments:Jt(e).filter(function(e){return t.includes(e.id)})}})(function(e){var t=e.assignments,n=r.a.useState([]),a=Object(f.a)(n,2),i=a[0],s=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{onClick:function(){return s(t)}},"View Selected Assignment Details"),i.map(function(e,t){return r.a.createElement(rr,{assignment:e,key:t})}))});var sr=Object(o.connect)(function(e){var t=Rn(e).selectedAssignmentIds;return{assignments:Jt(e).filter(function(e){return t.includes(e.id)})}},{offerForAssignmentCreate:On,offerForAssignmentEmail:wn,offerForAssignmentNag:Cn,offerForAssignmentWithdraw:yn,setOfferForAssignmentAccepted:Sn,setOfferForAssignmentRejected:bn})(function(e){var t=e.assignments,n=e.offerForAssignmentCreate,a=e.offerForAssignmentEmail,i=e.offerForAssignmentNag,s=e.offerForAssignmentWithdraw,o=e.setOfferForAssignmentAccepted,c=e.setOfferForAssignmentRejected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(_.a,{onClick:function(){var e=!0,a=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var o=i.value;n(o)}}catch(c){a=!0,r=c}finally{try{e||null==s.return||s.return()}finally{if(a)throw r}}}},"Create Offer"),r.a.createElement(_.a,{onClick:function(){var e=!0,n=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;s(o)}}catch(c){n=!0,a=c}finally{try{e||null==i.return||i.return()}finally{if(n)throw a}}}},"Withdraw Offer"),r.a.createElement(_.a,{onClick:function(){var e=!0,n=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var o=i.value;a(o)}}catch(c){n=!0,r=c}finally{try{e||null==s.return||s.return()}finally{if(n)throw r}}}},"Email Offer"),r.a.createElement(_.a,{onClick:function(){var e=!0,n=!1,a=void 0;try{for(var r,s=t[Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var o=r.value;i(o)}}catch(c){n=!0,a=c}finally{try{e||null==s.return||s.return()}finally{if(n)throw a}}}},"Nag Offer"),r.a.createElement(_.a,{onClick:function(){var e=!0,n=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var s=r.value;o(s)}}catch(c){n=!0,a=c}finally{try{e||null==i.return||i.return()}finally{if(n)throw a}}}},"Set as Accepted"),r.a.createElement(_.a,{onClick:function(){var e=!0,n=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var s=r.value;c(s)}}catch(o){n=!0,a=o}finally{try{e||null==i.return||i.return()}finally{if(n)throw a}}}},"Set as Rejected")))});function or(){var e=r.a.useState(!1),t=Object(f.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(_.a,{onClick:function(){a(!0)}},"Add Assignment"),r.a.createElement(ja,null),r.a.createElement(ar,{show:n,onHide:a}),r.a.createElement("div",null,r.a.createElement(ir,null)),r.a.createElement("div",null,r.a.createElement(sr,null)))}var cr={template_name:"",template_file:""};var ur=Object(o.connect)(function(e){return{contractTemplates:at(e),availableTemplates:rt(e)}},{upsertContractTemplate:et,fetchAllContractTemplates:tt})(function(e){var t=e.show,n=e.onHide,a=void 0===n?function(){}:n,i=e.contractTemplates,s=e.availableTemplates,o=e.upsertContractTemplate,c=e.fetchAllContractTemplates,u=r.a.useState(cr),l=Object(f.a)(u,2),d=l[0],p=l[1];r.a.useEffect(function(){t?c():p(cr)},[t,c]);var m=function(e,t){var n={delayShow:"",immediateShow:""};ra(e.template_name)&&ra(e.template_file)||(n.delayShow="A template name and template file is required");var a=t.find(function(t){return ra(t.template_name)===ra(e.template_name)});return a&&(n.immediateShow=r.a.createElement("p",null,"Another contract template exists with name=",e.template_name,":"," ",r.a.createElement("b",null,a.template_name," ",a.template_file))),n}(d,i);return r.a.createElement($n.a,{show:t,onHide:a},r.a.createElement($n.a.Header,{closeButton:!0},r.a.createElement($n.a.Title,null,"Add Contract Template")),r.a.createElement($n.a.Body,null,r.a.createElement(Da,{contractTemplate:d,setContractTemplate:p,availableTemplates:s}),m.immediateShow?r.a.createElement(aa.a,{variant:"danger"},m.immediateShow):null),r.a.createElement($n.a.Footer,null,r.a.createElement(_.a,{onClick:a,variant:"light"},"Cancel"),r.a.createElement(_.a,{onClick:function(){o(d),a()},title:m.delayShow||"Create Contract Template",disabled:!!m.delayShow||!!m.immediateShow},"Create Contract Template")))}),lr=Object(o.connect)(function(e){return{contractTemplates:at(e)}})(Wn);function dr(){var e=r.a.useState(!1),t=Object(f.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",null,r.a.createElement(_.a,{onClick:function(){a(!0)}},"Add Contract Template"),r.a.createElement(lr,null),r.a.createElement(ur,{show:n,onHide:a}))}function pr(){return r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/"},r.a.createElement(d.a,{to:"/tapp"})),r.a.createElement(d.b,{exact:!0,path:"/tapp/sessions"},r.a.createElement($a,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/contract_templates"},r.a.createElement(dr,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/instructors"},r.a.createElement(oa,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/positions"},r.a.createElement(tr,null)),r.a.createElement(d.b,{exact:!0,path:"/tapp/assignments"},r.a.createElement(or,null)),r.a.createElement(d.b,{exact:!0,path:"/dashboard"},r.a.createElement(Ma,null)),r.a.createElement(d.b,{exact:!0,path:"/cp"},r.a.createElement(Ja,null)))}var mr=n(893);function fr(e){return r.a.createElement(p.a.Link,Object.assign({as:c.b,activeClassName:"text-dark"},e),e.children)}function hr(e){var t=e.routes,n=void 0===t?[]:t,a=e.infoComponents,i=void 0===a?null:a;return 0===n.length?r.a.createElement("div",null,"No Routes in Header"):r.a.createElement(m.a,{bg:"light",variant:"light"},r.a.createElement(m.a.Brand,null,r.a.createElement(mr.a,{title:n.map(function(e){return r.a.createElement(d.b,{path:e.route,key:e.route},e.name)})},n.filter(function(e){return!e.hidden}).map(function(e){return r.a.createElement(mr.a.Item,{key:e.route,as:"span",tabIndex:"0"},r.a.createElement(fr,{to:e.route,title:e.description},e.name))}))),r.a.createElement(p.a,{className:"mr-auto"},n.map(function(e){return r.a.createElement(d.b,{path:e.route,key:e.route},(e.subroutes||[]).map(function(t){var n="".concat(e.route).concat(t.route);return r.a.createElement(fr,{to:n,key:n,title:t.description},t.name)}))})),i.map(function(e,t){return r.a.createElement("div",{key:t},e)}))}n(157);var _r=n(374),vr=r.a.forwardRef(function(e,t){var n=e.children,a=e.style,i=e.className,s=e.clearFilter,o=r.a.useState(""),c=Object(f.a)(o,2),u=c[0],l=c[1];r.a.useEffect(function(){s&&l("")},[s]);var d=r.a.Children.toArray(n).filter(function(e){return!u.trim()||e.props.children.toLowerCase().includes(u.trim())}),p=0===n.length?"No Available Sessions":"No Matching Sessions";return r.a.createElement("div",{style:a,className:i,ref:t},r.a.createElement(_r.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",title:"Filter sessions",onChange:function(e){l(e.currentTarget.value)},value:u,tabIndex:0}),r.a.createElement("ul",{className:"list-unstyled my-0"},d.length>0?d:r.a.createElement("li",{className:"dropdown-item text-muted"},p)))});function gr(e){var t=e.items,n=e.activeItemId,a=e.clearFilter;return r.a.createElement(ma.a.Menu,{as:vr,clearFilter:a},t.map(function(e,t){return r.a.createElement(ma.a.Item,{key:e.id,eventKey:t,active:n===e.id},e.name)}))}function Er(){return r.a.createElement(hr,{routes:[{route:"/tapp",name:"TAPP",description:"TAPP Main View",subroutes:[{route:"/sessions",name:"Sessions",description:"Manage Sessions"},{route:"/contract_templates",name:"Contract Templates",description:"Manage Contract Templates"},{route:"/instructors",name:"Instructors",description:"Manage Instructors"},{route:"/positions",name:"Positions",description:"Manage Positions"},{route:"/assignments",name:"Assignments",description:"Manage Assignments"},{route:"/summary",name:"Summary",description:"Overivew of all data"}]},{route:"/cp",name:"CP",description:"Contract Presentment",subroutes:[{route:"/statistics",name:"Statistics",description:"See statistics about accepted/rejected contracts"}]},{route:"/dashboard",name:"Dashboard",description:"List of all widgets",hidden:!0}],infoComponents:[r.a.createElement(yr,null),r.a.createElement(wr,null)]})}var Sr,br={setActiveSession:xe},yr=Object(o.connect)(function(e){return{sessions:Fe(e),activeSession:De(e)}},br)(function(e){var t=e.sessions,n=void 0===t?[]:t,a=e.activeSession,i=e.setActiveSession,s=r.a.useState(!1),o=Object(f.a)(s,2),c=o[0],u=o[1],l=a?a.id:null,d=l?r.a.createElement("span",{className:"text-primary mr-2"},a.name):r.a.createElement("span",{className:"text-secondary mr-2"},"Select a Session");return r.a.createElement(ca.a,null,"Selected session:",r.a.createElement(ma.a,{onSelect:function(e){i(n[e])},onToggle:function(e){return u(e)},show:c},r.a.createElement(ma.a.Toggle,{split:!0,variant:"light"},d),r.a.createElement(gr,{items:n,activeItemId:l,clearFilter:!c})))}),Or={setActiveUserRole:ye},wr=Object(o.connect)(function(e){return{activeUser:Oe(e).active_user,activeRole:Oe(e).active_role}},Or)(function(e){var t=r.a.useState(!1),n=Object(f.a)(t,2),a=n[0],i=n[1],s=e.activeUser,o=void 0===s?{utorid:"<noid>",roles:[]}:s,c=e.activeRole,u=e.setActiveUserRole,l=o.roles,d=c?r.a.createElement("span",{className:"text-primary mr-2"},c):r.a.createElement("span",{className:"text-secondary mr-2"},"Select a role"),p=function(e){return c===e};return r.a.createElement(ca.a,null,"Login: ",o.utorid," as",r.a.createElement(ma.a,{onSelect:function(e){u(l[e])},onToggle:function(e){return i(e)},show:a},r.a.createElement(ma.a.Toggle,{split:!0,variant:"light"},d),r.a.createElement(ma.a.Menu,null,(l||[]).map(function(e,t){return r.a.createElement(ma.a.Item,{key:t,eventKey:t,active:p(e)},e)}))))}),Cr=function(e){function t(){return Object(W.a)(this,t),Object(J.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(Fn.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(window.location){var t=function(e){var t=new URLSearchParams(e),n={},a=!0,r=!1,i=void 0;try{for(var s,o=t.entries()[Symbol.iterator]();!(a=(s=o.next()).done);a=!0){var c=s.value,u=Object(f.a)(c,2),l=u[0],d=u[1];n[l]=Dn(d)}}catch(p){r=!0,i=p}finally{try{a||null==o.return||o.return()}finally{if(r)throw i}}return n}(window.location.search);this.props.setGlobals(t),G(function(){return function(t,n){var a,r,i;return O.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:a=n(),r=a.model.sessions.activeSession,i=a.ui.globals,e.props.setGlobals(Object(l.a)({},i,{activeSession:r.id}));case 4:case"end":return t.stop()}})}}),window.setTimeout(function(){e.props.fetchActiveUser()},0),null!=t.activeSession&&window.setTimeout(function(){e.props.fetchActiveUser(),e.props.setActiveSession({id:t.activeSession})},0)}}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Er,null),r.a.createElement(pr,null),r.a.createElement(Pn,null))}}]),t}(r.a.Component),Tr=Object(o.connect)(function(e){return{globals:e.ui.globals}},{setGlobals:v,setActiveSession:xe,fetchActiveUser:Se})(Cr),jr=n(380),Ar=n(243),Nr=n(381),kr=n.n(Nr),xr=n(895),Ir=Object(oe.createReducer)({selectedAssignmentIds:[]},Object(ie.a)({},"SET_SELECTED_ROWS",function(e,t){return Object(l.a)({},e,{selectedAssignmentIds:t.payload})})),Fr=Object(oe.createReducer)({},Object(ie.a)({},"SET_GLOBALS",function(e,t){return Object(l.a)({},t.payload)})),Dr=de({model:de({status:le({ongoingInteraction:!1,ongoingInteractionsList:[]},(Sr={},Object(ie.a)(Sr,"API_INTERACTION_START",function(e,t){return Object(l.a)({},e,{ongoingInteraction:!0,ongoingInteractionsList:[].concat(Object(Ea.a)(e.ongoingInteractionsList),[t.payload])})}),Object(ie.a)(Sr,"API_INTERACTION_END",function(e,t){var n=e.ongoingInteractionsList.filter(function(e){return e.id!==t.payload.id});return Object(l.a)({},e,{ongoingInteraction:n.length>0,ongoingInteractionsList:n})}),Sr)),sessions:fe,positions:Ue,applicants:ot,applications:Kt,assignments:Ft,instructors:He,contractTemplates:Ve,users:he}),ui:de({notifications:j.reducer,form:xr.a,offerTable:Ir,globals:Fr})}),Pr=n(384),Rr=function(){var e={key:"root",storage:kr.a,whitelist:["auth","application"]},t=Object(Ar.a)(e,Dr),n=Object(se.createStore)(t,Object(jr.composeWithDevTools)(Object(se.applyMiddleware)(Pr.a)));return{store:n,persistor:Object(Ar.b)(n)}}(),Ur=Rr.store,Hr=Rr.persistor,Lr=function(e){return r.a.createElement(r.a.Fragment,null,e.children)};Lr=function(e){return r.a.createElement("div",{id:"dev-frame",className:"bg-info"},r.a.createElement("div",{id:"dev-frame-header"},r.a.createElement(m.a,{expand:!0,variant:"dark"},r.a.createElement(m.a.Brand,{href:"#/",title:"View TAPP in development mode in a framed window."},"Dev Mode"),r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(kn,{to:"/dashboard"},"Dashboard")),r.a.createElement(p.a,{className:"mr-auto"},r.a.createElement(kn,{to:"/api-docs"},"API Docs")),r.a.createElement(m.a.Collapse,{className:"justify-content-end"},r.a.createElement(In,null)))),r.a.createElement("div",{id:"dev-frame-body"},r.a.createElement("div",{id:"dev-frame-body-inner"},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/api-docs"},r.a.createElement(jn.a,{spec:xn,docExpansion:"list"})),r.a.createElement(d.b,null,e.children)))),r.a.createElement("div",{id:"dev-frame-footer"}))};var Br;Br=Tr,s.a.render(r.a.createElement(c.a,null,r.a.createElement(o.Provider,{store:Ur},r.a.createElement(u.a,{persistor:Hr},r.a.createElement(Lr,null,r.a.createElement(Br,null))))),document.getElementById("root"))}},[[387,1,2]]]);
//# sourceMappingURL=main.187ab351.chunk.js.map